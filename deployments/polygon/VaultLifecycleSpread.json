{
  "address": "0x87ccF30e94F87b3f5cD5e7ea6F683F216486206c",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "gnosisEasyAuction",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "optionAuctionID",
          "type": "uint256"
        }
      ],
      "name": "getAuctionSettlementPrice",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "keeper",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "feeRecipient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "performanceFee",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "managementFee",
          "type": "uint256"
        },
        {
          "internalType": "string",
          "name": "tokenName",
          "type": "string"
        },
        {
          "internalType": "string",
          "name": "tokenSymbol",
          "type": "string"
        },
        {
          "components": [
            {
              "internalType": "bool",
              "name": "isPut",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "isSpread",
              "type": "bool"
            },
            {
              "internalType": "uint8",
              "name": "decimals",
              "type": "uint8"
            },
            {
              "internalType": "address",
              "name": "asset",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "underlying",
              "type": "address"
            },
            {
              "internalType": "uint56",
              "name": "minimumSupply",
              "type": "uint56"
            },
            {
              "internalType": "uint104",
              "name": "cap",
              "type": "uint104"
            }
          ],
          "internalType": "struct Vault.VaultParams",
          "name": "_vaultParams",
          "type": "tuple"
        }
      ],
      "name": "verifyInitializerParams",
      "outputs": [],
      "stateMutability": "pure",
      "type": "function"
    }
  ],
  "transactionHash": "0xd2b13bd2d53c55c05f4872195c60f8ccdd4c0cca6145bf7368bd4722f61bd3ae",
  "receipt": {
    "to": null,
    "from": "0x84a9Ea1F5F2F4D0685147B1cD1374f470FcB76dB",
    "contractAddress": "0x87ccF30e94F87b3f5cD5e7ea6F683F216486206c",
    "transactionIndex": 6,
    "gasUsed": "4224368",
    "logsBloom": "0x00000000000010000000000000000000000000000000000000000000000000000000000000000000020000000000000000008000000000000000000000000000000000000000000000000000000000800000000000000000000100000000000000000000000080000000000000000000000000000000000080000000000000000000000000000000000000000000000000008000000000000000000000000000200000000000000000000000000000000000000000000000000000000000004000000000000000000081000000000000000000000000010000100000000000000000000000000000000000000000000000000000000000000000000000100000",
    "blockHash": "0x28779b4ee5dd8e8a2dadf81596bc7137780e607e4597723aeb57d42de708a911",
    "transactionHash": "0xd2b13bd2d53c55c05f4872195c60f8ccdd4c0cca6145bf7368bd4722f61bd3ae",
    "logs": [
      {
        "transactionIndex": 6,
        "blockNumber": 36176248,
        "transactionHash": "0xd2b13bd2d53c55c05f4872195c60f8ccdd4c0cca6145bf7368bd4722f61bd3ae",
        "address": "0x0000000000000000000000000000000000001010",
        "topics": [
          "0x4dfe1bbbcf077ddc3e01291eea2d5c70c2b422b415d95645b9adcfd678cb1d63",
          "0x0000000000000000000000000000000000000000000000000000000000001010",
          "0x00000000000000000000000084a9ea1f5f2f4d0685147b1cd1374f470fcb76db",
          "0x000000000000000000000000e7e2cb8c81c10ff191a73fe266788c9ce62ec754"
        ],
        "data": "0x00000000000000000000000000000000000000000000000008b24c951d0bfcd000000000000000000000000000000000000000000000000188fb73687ecb8599000000000000000000000000000000000000000000006a0e60d1ecc6af471b08000000000000000000000000000000000000000000000001804926d361bf88c9000000000000000000000000000000000000000000006a0e6984395bcc5317d8",
        "logIndex": 44,
        "blockHash": "0x28779b4ee5dd8e8a2dadf81596bc7137780e607e4597723aeb57d42de708a911"
      }
    ],
    "blockNumber": 36176248,
    "cumulativeGasUsed": "5221457",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "solcInputHash": "d527cdaa9e8309b979a05a31d25f22aa",
  "metadata": "{\"compiler\":{\"version\":\"0.8.17+commit.8df45f5f\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"gnosisEasyAuction\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"optionAuctionID\",\"type\":\"uint256\"}],\"name\":\"getAuctionSettlementPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"keeper\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"feeRecipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"performanceFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"managementFee\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"tokenName\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"tokenSymbol\",\"type\":\"string\"},{\"components\":[{\"internalType\":\"bool\",\"name\":\"isPut\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"isSpread\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"decimals\",\"type\":\"uint8\"},{\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"underlying\",\"type\":\"address\"},{\"internalType\":\"uint56\",\"name\":\"minimumSupply\",\"type\":\"uint56\"},{\"internalType\":\"uint104\",\"name\":\"cap\",\"type\":\"uint104\"}],\"internalType\":\"struct Vault.VaultParams\",\"name\":\"_vaultParams\",\"type\":\"tuple\"}],\"name\":\"verifyInitializerParams\",\"outputs\":[],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"burnOtokens(address,address)\":{\"params\":{\"currentSpread\":\"is the address of the current option\",\"gammaController\":\"is the address of the opyn controller contract\"},\"returns\":{\"_0\":\"amount of collateral redeemed by burning otokens\"}},\"claimAuctionOtokens(Vault.AuctionSellOrder,address,address)\":{\"params\":{\"auctionSellOrder\":\"is the sell order of the bid\",\"counterpartyThetaVault\":\"is the address of the counterparty theta vault of this delta vault\",\"gnosisEasyAuction\":\"is the address of the gnosis auction contract holding custody to the funds\"}},\"commitAndClose(VaultLifecycleSpread.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)\":{\"params\":{\"closeParams\":\"is the struct with details on previous spread and strike selection details\",\"vaultParams\":\"is the struct with vault general data\",\"vaultState\":\"is the struct with vault accounting state\"},\"returns\":{\"deltas\":\"is the deltas of the new options in the spread\",\"spread\":\"addresses of the new short and long options\",\"strikePrices\":\"is the strike prices of the options in spread\"}},\"createSpread(address,address,address[],uint256,address)\":{\"params\":{\"depositAmount\":\"is the amount of collateral to deposit\",\"gammaController\":\"is the address of the opyn controller contract\",\"marginPool\":\"is the address of the opyn margin contract which holds the collateral\",\"spread\":\"Spread oTokens\",\"spreadToken\":\"Spread Token\"},\"returns\":{\"collateralUsed\":\"collateral amount used to create spread\",\"mintAmount\":\"spreadToken mint amount\"}},\"getAuctionSettlementPrice(address,uint256)\":{\"params\":{\"gnosisEasyAuction\":\"The address of the Gnosis Easy Auction contract\"},\"returns\":{\"_0\":\"settlementPrice Auction settlement price\"}},\"placeBid(GnosisAuction.BidDetails)\":{\"params\":{\"bidDetails\":\"is the struct with all the details of the bid including the auction's id and how much to bid\"}},\"rollover(Vault.VaultState storage,VaultLifecycleSpread.RolloverParams)\":{\"params\":{\"params\":\"is the rollover parameters passed to compute the next state\",\"vaultState\":\"is the storage variable vaultState passed from RibbonVault\"},\"returns\":{\"mintShares\":\"is the amount of shares to mint from deposits\",\"newLockedAmount\":\"is the amount of funds to allocate for the new round\",\"newPricePerShare\":\"is the price per share of the new round\",\"performanceFeeInAsset\":\"is the performance fee charged by vault\",\"queuedWithdrawAmount\":\"is the amount of funds set aside for withdrawal\",\"totalVaultFee\":\"is the total amount of fee charged by vault\"}},\"settleLong(address,address,address)\":{\"params\":{\"asset\":\"is the address of the vault's asset\",\"gammaController\":\"is the address of the opyn controller contract\",\"oldOption\":\"is the address of the old option\"},\"returns\":{\"_0\":\"amount of asset received by exercising the option\"}},\"settleShort(address,address)\":{\"params\":{\"gammaController\":\"is the address of the opyn controller contract\",\"spreadToken\":\"Token which holds other vault of the strategy\"},\"returns\":{\"_0\":\"amount of collateral redeemed from the vault\"}},\"startAuction(GnosisAuction.AuctionDetails)\":{\"params\":{\"auctionDetails\":\"is the struct with all the custom parameters of the auction\"},\"returns\":{\"_0\":\"the auction id of the newly created auction\"}},\"verifyInitializerParams(address,address,address,uint256,uint256,string,string,Vault.VaultParams)\":{\"params\":{\"_vaultParams\":\"is the struct with vault general data\",\"feeRecipient\":\"is the address to recieve vault performance and management fees\",\"owner\":\"is the owner of the vault with critical permissions\",\"performanceFee\":\"is the perfomance fee pct.\",\"tokenName\":\"is the name of the token\",\"tokenSymbol\":\"is the symbol of the token\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"burnOtokens(address,address)\":{\"notice\":\"Burn the remaining oTokens left over from auction. Currently this implementation is simple. It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time.\"},\"claimAuctionOtokens(Vault.AuctionSellOrder,address,address)\":{\"notice\":\"Claims the oTokens belonging to the vault\"},\"commitAndClose(VaultLifecycleSpread.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)\":{\"notice\":\"Sets the next spread for the vault, and calculates its premium for the auction\"},\"createSpread(address,address,address[],uint256,address)\":{\"notice\":\"Creates the actual Opyn short position by depositing collateral and minting otokens\"},\"getAuctionSettlementPrice(address,uint256)\":{\"notice\":\"Gets the settlement price of a settled auction\"},\"placeBid(GnosisAuction.BidDetails)\":{\"notice\":\"Places a bid in an auction\"},\"rollover(Vault.VaultState storage,VaultLifecycleSpread.RolloverParams)\":{\"notice\":\"Calculate the shares to mint, new price per share, and amount of funds to re-allocate as collateral for the new round\"},\"settleLong(address,address,address)\":{\"notice\":\"Exercises the ITM option using existing long otoken position. Currently this implementation is simple. It calls the `Redeem` action to claim the payout.\"},\"settleShort(address,address)\":{\"notice\":\"Close the existing short otoken position. Currently this implementation is simple. It closes the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by calling SettleVault action, this assumption should hold.\"},\"startAuction(GnosisAuction.AuctionDetails)\":{\"notice\":\"Starts the gnosis auction\"},\"verifyInitializerParams(address,address,address,uint256,uint256,string,string,Vault.VaultParams)\":{\"notice\":\"Verify the constructor params satisfy requirements\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/libraries/VaultLifecycleSpread.sol\":\"VaultLifecycleSpread\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":0},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/proxy/Clones.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.8.0) (proxy/Clones.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev https://eips.ethereum.org/EIPS/eip-1167[EIP 1167] is a standard for\\n * deploying minimal proxy contracts, also known as \\\"clones\\\".\\n *\\n * > To simply and cheaply clone contract functionality in an immutable way, this standard specifies\\n * > a minimal bytecode implementation that delegates all calls to a known, fixed address.\\n *\\n * The library includes functions to deploy a proxy using either `create` (traditional deployment) or `create2`\\n * (salted deterministic deployment). It also includes functions to predict the addresses of clones deployed using the\\n * deterministic method.\\n *\\n * _Available since v3.4._\\n */\\nlibrary Clones {\\n    /**\\n     * @dev Deploys and returns the address of a clone that mimics the behaviour of `implementation`.\\n     *\\n     * This function uses the create opcode, which should never revert.\\n     */\\n    function clone(address implementation) internal returns (address instance) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            // Cleans the upper 96 bits of the `implementation` word, then packs the first 3 bytes\\n            // of the `implementation` address with the bytecode before the address.\\n            mstore(0x00, or(shr(0xe8, shl(0x60, implementation)), 0x3d602d80600a3d3981f3363d3d373d3d3d363d73000000))\\n            // Packs the remaining 17 bytes of `implementation` with the bytecode after the address.\\n            mstore(0x20, or(shl(0x78, implementation), 0x5af43d82803e903d91602b57fd5bf3))\\n            instance := create(0, 0x09, 0x37)\\n        }\\n        require(instance != address(0), \\\"ERC1167: create failed\\\");\\n    }\\n\\n    /**\\n     * @dev Deploys and returns the address of a clone that mimics the behaviour of `implementation`.\\n     *\\n     * This function uses the create2 opcode and a `salt` to deterministically deploy\\n     * the clone. Using the same `implementation` and `salt` multiple time will revert, since\\n     * the clones cannot be deployed twice at the same address.\\n     */\\n    function cloneDeterministic(address implementation, bytes32 salt) internal returns (address instance) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            // Cleans the upper 96 bits of the `implementation` word, then packs the first 3 bytes\\n            // of the `implementation` address with the bytecode before the address.\\n            mstore(0x00, or(shr(0xe8, shl(0x60, implementation)), 0x3d602d80600a3d3981f3363d3d373d3d3d363d73000000))\\n            // Packs the remaining 17 bytes of `implementation` with the bytecode after the address.\\n            mstore(0x20, or(shl(0x78, implementation), 0x5af43d82803e903d91602b57fd5bf3))\\n            instance := create2(0, 0x09, 0x37, salt)\\n        }\\n        require(instance != address(0), \\\"ERC1167: create2 failed\\\");\\n    }\\n\\n    /**\\n     * @dev Computes the address of a clone deployed using {Clones-cloneDeterministic}.\\n     */\\n    function predictDeterministicAddress(\\n        address implementation,\\n        bytes32 salt,\\n        address deployer\\n    ) internal pure returns (address predicted) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            let ptr := mload(0x40)\\n            mstore(add(ptr, 0x38), deployer)\\n            mstore(add(ptr, 0x24), 0x5af43d82803e903d91602b57fd5bf3ff)\\n            mstore(add(ptr, 0x14), implementation)\\n            mstore(ptr, 0x3d602d80600a3d3981f3363d3d373d3d3d363d73)\\n            mstore(add(ptr, 0x58), salt)\\n            mstore(add(ptr, 0x78), keccak256(add(ptr, 0x0c), 0x37))\\n            predicted := keccak256(add(ptr, 0x43), 0x55)\\n        }\\n    }\\n\\n    /**\\n     * @dev Computes the address of a clone deployed using {Clones-cloneDeterministic}.\\n     */\\n    function predictDeterministicAddress(address implementation, bytes32 salt)\\n        internal\\n        view\\n        returns (address predicted)\\n    {\\n        return predictDeterministicAddress(implementation, salt, address(this));\\n    }\\n}\\n\",\"keccak256\":\"0x888d64d221d52c31d015b76e50ca1af5ef8ff076550810b49cea6b01d8267a10\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.6.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `from` to `to` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 amount\\n    ) external returns (bool);\\n}\\n\",\"keccak256\":\"0x9750c6b834f7b43000631af5cc30001c5f547b3ceb3635488f140f60e897ea6b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/extensions/draft-IERC20Permit.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (token/ERC20/extensions/draft-IERC20Permit.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in\\n * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].\\n *\\n * Adds the {permit} method, which can be used to change an account's ERC20 allowance (see {IERC20-allowance}) by\\n * presenting a message signed by the account. By not relying on {IERC20-approve}, the token holder account doesn't\\n * need to send a transaction, and thus is not required to hold Ether at all.\\n */\\ninterface IERC20Permit {\\n    /**\\n     * @dev Sets `value` as the allowance of `spender` over ``owner``'s tokens,\\n     * given ``owner``'s signed approval.\\n     *\\n     * IMPORTANT: The same issues {IERC20-approve} has related to transaction\\n     * ordering also apply here.\\n     *\\n     * Emits an {Approval} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     * - `deadline` must be a timestamp in the future.\\n     * - `v`, `r` and `s` must be a valid `secp256k1` signature from `owner`\\n     * over the EIP712-formatted function arguments.\\n     * - the signature must use ``owner``'s current nonce (see {nonces}).\\n     *\\n     * For more information on the signature format, see the\\n     * https://eips.ethereum.org/EIPS/eip-2612#specification[relevant EIP\\n     * section].\\n     */\\n    function permit(\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) external;\\n\\n    /**\\n     * @dev Returns the current nonce for `owner`. This value must be\\n     * included whenever a signature is generated for {permit}.\\n     *\\n     * Every successful call to {permit} increases ``owner``'s nonce by one. This\\n     * prevents a signature from being used multiple times.\\n     */\\n    function nonces(address owner) external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the domain separator used in the encoding of the signature for {permit}, as defined by {EIP712}.\\n     */\\n    // solhint-disable-next-line func-name-mixedcase\\n    function DOMAIN_SEPARATOR() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0xf41ca991f30855bf80ffd11e9347856a517b977f0a6c2d52e6421a99b7840329\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.8.0) (token/ERC20/utils/SafeERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC20.sol\\\";\\nimport \\\"../extensions/draft-IERC20Permit.sol\\\";\\nimport \\\"../../../utils/Address.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using Address for address;\\n\\n    function safeTransfer(\\n        IERC20 token,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));\\n    }\\n\\n    function safeTransferFrom(\\n        IERC20 token,\\n        address from,\\n        address to,\\n        uint256 value\\n    ) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transferFrom.selector, from, to, value));\\n    }\\n\\n    /**\\n     * @dev Deprecated. This function has issues similar to the ones found in\\n     * {IERC20-approve}, and its usage is discouraged.\\n     *\\n     * Whenever possible, use {safeIncreaseAllowance} and\\n     * {safeDecreaseAllowance} instead.\\n     */\\n    function safeApprove(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        // safeApprove should only be called when setting an initial allowance,\\n        // or when resetting it to zero. To increase and decrease it, use\\n        // 'safeIncreaseAllowance' and 'safeDecreaseAllowance'\\n        require(\\n            (value == 0) || (token.allowance(address(this), spender) == 0),\\n            \\\"SafeERC20: approve from non-zero to non-zero allowance\\\"\\n        );\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));\\n    }\\n\\n    function safeIncreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        uint256 newAllowance = token.allowance(address(this), spender) + value;\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n    }\\n\\n    function safeDecreaseAllowance(\\n        IERC20 token,\\n        address spender,\\n        uint256 value\\n    ) internal {\\n        unchecked {\\n            uint256 oldAllowance = token.allowance(address(this), spender);\\n            require(oldAllowance >= value, \\\"SafeERC20: decreased allowance below zero\\\");\\n            uint256 newAllowance = oldAllowance - value;\\n            _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));\\n        }\\n    }\\n\\n    function safePermit(\\n        IERC20Permit token,\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) internal {\\n        uint256 nonceBefore = token.nonces(owner);\\n        token.permit(owner, spender, value, deadline, v, r, s);\\n        uint256 nonceAfter = token.nonces(owner);\\n        require(nonceAfter == nonceBefore + 1, \\\"SafeERC20: permit did not succeed\\\");\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address-functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data, \\\"SafeERC20: low-level call failed\\\");\\n        if (returndata.length > 0) {\\n            // Return data is optional\\n            require(abi.decode(returndata, (bool)), \\\"SafeERC20: ERC20 operation did not succeed\\\");\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x9b72f93be69ca894d8492c244259615c4a742afc8d63720dbc8bb81087d9b238\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.8.0) (utils/Address.sol)\\n\\npragma solidity ^0.8.1;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     * ====\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * You shouldn't rely on `isContract` to protect against flash loan attacks!\\n     *\\n     * Preventing calls from contracts is highly discouraged. It breaks composability, breaks support for smart wallets\\n     * like Gnosis Safe, and does not provide security since it can be circumvented by calling from a contract\\n     * constructor.\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // This method relies on extcodesize/address.code.length, which returns 0\\n        // for contracts in construction, since the code is only stored at the end\\n        // of the constructor execution.\\n\\n        return account.code.length > 0;\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason, it is bubbled up by this\\n     * function (like regular Solidity function calls).\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, \\\"Address: low-level call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with\\n     * `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, value, \\\"Address: low-level call with value failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but\\n     * with `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(address(this).balance >= value, \\\"Address: insufficient balance for call\\\");\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        return functionStaticCall(target, data, \\\"Address: low-level static call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionDelegateCall(target, data, \\\"Address: low-level delegate call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call to smart-contract was successful, and revert (either by bubbling\\n     * the revert reason or using the provided one) in case of unsuccessful call or if target was not a contract.\\n     *\\n     * _Available since v4.8._\\n     */\\n    function verifyCallResultFromTarget(\\n        address target,\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        if (success) {\\n            if (returndata.length == 0) {\\n                // only check isContract if the call was successful and the return data is empty\\n                // otherwise we already know that it was a contract\\n                require(isContract(target), \\\"Address: call to non-contract\\\");\\n            }\\n            return returndata;\\n        } else {\\n            _revert(returndata, errorMessage);\\n        }\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call was successful, and revert if it wasn't, either by bubbling the\\n     * revert reason or using the provided one.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function verifyCallResult(\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal pure returns (bytes memory) {\\n        if (success) {\\n            return returndata;\\n        } else {\\n            _revert(returndata, errorMessage);\\n        }\\n    }\\n\\n    function _revert(bytes memory returndata, string memory errorMessage) private pure {\\n        // Look for revert reason and bubble it up if present\\n        if (returndata.length > 0) {\\n            // The easiest way to bubble the revert reason is using memory via assembly\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                let returndata_size := mload(returndata)\\n                revert(add(32, returndata), returndata_size)\\n            }\\n        } else {\\n            revert(errorMessage);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xf96f969e24029d43d0df89e59d365f277021dac62b48e1c1e3ebe0acdd7f1ca1\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/math/SafeMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.6.0) (utils/math/SafeMath.sol)\\n\\npragma solidity ^0.8.0;\\n\\n// CAUTION\\n// This version of SafeMath should only be used with Solidity 0.8 or later,\\n// because it relies on the compiler's built in overflow checks.\\n\\n/**\\n * @dev Wrappers over Solidity's arithmetic operations.\\n *\\n * NOTE: `SafeMath` is generally not needed starting with Solidity 0.8, since the compiler\\n * now has built in overflow checking.\\n */\\nlibrary SafeMath {\\n    /**\\n     * @dev Returns the addition of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryAdd(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            uint256 c = a + b;\\n            if (c < a) return (false, 0);\\n            return (true, c);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function trySub(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b > a) return (false, 0);\\n            return (true, a - b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, with an overflow flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMul(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            // Gas optimization: this is cheaper than requiring 'a' not being zero, but the\\n            // benefit is lost if 'b' is also tested.\\n            // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522\\n            if (a == 0) return (true, 0);\\n            uint256 c = a * b;\\n            if (c / a != b) return (false, 0);\\n            return (true, c);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the division of two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryDiv(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b == 0) return (false, 0);\\n            return (true, a / b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers, with a division by zero flag.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function tryMod(uint256 a, uint256 b) internal pure returns (bool, uint256) {\\n        unchecked {\\n            if (b == 0) return (false, 0);\\n            return (true, a % b);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the addition of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `+` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Addition cannot overflow.\\n     */\\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a + b;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting on\\n     * overflow (when the result is negative).\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a - b;\\n    }\\n\\n    /**\\n     * @dev Returns the multiplication of two unsigned integers, reverting on\\n     * overflow.\\n     *\\n     * Counterpart to Solidity's `*` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Multiplication cannot overflow.\\n     */\\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a * b;\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a / b;\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting when dividing by zero.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a % b;\\n    }\\n\\n    /**\\n     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on\\n     * overflow (when the result is negative).\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {trySub}.\\n     *\\n     * Counterpart to Solidity's `-` operator.\\n     *\\n     * Requirements:\\n     *\\n     * - Subtraction cannot overflow.\\n     */\\n    function sub(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b <= a, errorMessage);\\n            return a - b;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the integer division of two unsigned integers, reverting with custom message on\\n     * division by zero. The result is rounded towards zero.\\n     *\\n     * Counterpart to Solidity's `/` operator. Note: this function uses a\\n     * `revert` opcode (which leaves remaining gas untouched) while Solidity\\n     * uses an invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function div(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b > 0, errorMessage);\\n            return a / b;\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),\\n     * reverting with custom message when dividing by zero.\\n     *\\n     * CAUTION: This function is deprecated because it requires allocating memory for the error\\n     * message unnecessarily. For custom revert reasons use {tryMod}.\\n     *\\n     * Counterpart to Solidity's `%` operator. This function uses a `revert`\\n     * opcode (which leaves remaining gas untouched) while Solidity uses an\\n     * invalid opcode to revert (consuming all remaining gas).\\n     *\\n     * Requirements:\\n     *\\n     * - The divisor cannot be zero.\\n     */\\n    function mod(\\n        uint256 a,\\n        uint256 b,\\n        string memory errorMessage\\n    ) internal pure returns (uint256) {\\n        unchecked {\\n            require(b > 0, errorMessage);\\n            return a % b;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x0f633a0223d9a1dcccfcf38a64c9de0874dfcbfac0c6941ccf074d63a2ce0e1e\",\"license\":\"MIT\"},\"contracts/interfaces/GammaInterface.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nlibrary GammaTypes {\\n    // vault is a struct of 6 arrays that describe a position a user has, a user can have multiple vaults.\\n    struct Vault {\\n        // addresses of oTokens a user has shorted (i.e. written) against this vault\\n        address[] shortOtokens;\\n        // addresses of oTokens a user has bought and deposited in this vault\\n        // user can be long oTokens without opening a vault (e.g. by buying on a DEX)\\n        // generally, long oTokens will be 'deposited' in vaults to act as collateral\\n        // in order to write oTokens against (i.e. in spreads)\\n        address[] longOtokens;\\n        // addresses of other ERC-20s a user has deposited as collateral in this vault\\n        address[] collateralAssets;\\n        // quantity of oTokens minted/written for each oToken address in shortOtokens\\n        uint256[] shortAmounts;\\n        // quantity of oTokens owned and held in the vault for each oToken address in longOtokens\\n        uint256[] longAmounts;\\n        // quantity of ERC-20 deposited as collateral in the vault for each ERC-20 address in collateralAssets\\n        uint256[] collateralAmounts;\\n    }\\n\\n    // vault is a struct of 6 arrays that describe a position a user has, a user can have multiple vaults.\\n    struct MarginVault {\\n        // addresses of oTokens a user has shorted (i.e. written) against this vault\\n        address[] shortOtokens;\\n        // addresses of oTokens a user has bought and deposited in this vault\\n        // user can be long oTokens without opening a vault (e.g. by buying on a DEX)\\n        // generally, long oTokens will be 'deposited' in vaults to act as collateral in order to write oTokens against (i.e. in spreads)\\n        address[] longOtokens;\\n        // addresses of other ERC-20s a user has deposited as collateral in this vault\\n        address[] collateralAssets;\\n        // quantity of oTokens minted/written for each oToken address in shortOtokens\\n        uint256[] shortAmounts;\\n        // quantity of oTokens owned and held in the vault for each oToken address in longOtokens\\n        uint256[] longAmounts;\\n        // quantity of ERC-20 deposited as collateral in the vault for each ERC-20 address in collateralAssets\\n        uint256[] collateralAmounts;\\n    }\\n}\\n\\ninterface IMarginCalculator {\\n    /**\\n     * @notice returns the amount of collateral that can be removed from an actual or a theoretical vault\\n     * @dev return amount is denominated in the collateral asset for the oToken in the vault, or the collateral asset in the vault\\n     * @param _vault theoretical vault that needs to be checked\\n     * @param _vaultType vault type (0 for spread/max loss, 1 for naked margin)\\n     * @return excessCollateral the amount by which the margin is above or below the required amount\\n     * @return isExcess True if there is excess margin in the vault, False if there is a deficit of margin in the vault\\n     * if True, collateral can be taken out from the vault, if False, additional collateral needs to be added to vault\\n     */\\n    function getExcessCollateral(GammaTypes.MarginVault memory _vault, uint256 _vaultType)\\n        external\\n        view\\n        returns (uint256, bool);\\n}\\n\\ninterface IOtoken {\\n    function underlyingAsset() external view returns (address);\\n\\n    function strikeAsset() external view returns (address);\\n\\n    function collateralAsset() external view returns (address);\\n\\n    function strikePrice() external view returns (uint256);\\n\\n    function expiryTimestamp() external view returns (uint256);\\n\\n    function isPut() external view returns (bool);\\n}\\n\\ninterface IOtokenFactory {\\n    function getOtoken(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external view returns (address);\\n\\n    function createOtoken(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external returns (address);\\n\\n    function getTargetOtokenAddress(\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n    ) external view returns (address);\\n\\n    event OtokenCreated(\\n        address tokenAddress,\\n        address creator,\\n        address indexed underlying,\\n        address indexed strike,\\n        address indexed collateral,\\n        uint256 strikePrice,\\n        uint256 expiry,\\n        bool isPut\\n    );\\n}\\n\\ninterface IController {\\n    // possible actions that can be performed\\n    enum ActionType {\\n        OpenVault,\\n        MintShortOption,\\n        BurnShortOption,\\n        DepositLongOption,\\n        WithdrawLongOption,\\n        DepositCollateral,\\n        WithdrawCollateral,\\n        SettleVault,\\n        Redeem,\\n        Call,\\n        Liquidate\\n    }\\n\\n    struct ActionArgs {\\n        // type of action that is being performed on the system\\n        ActionType actionType;\\n        // address of the account owner\\n        address owner;\\n        // address which we move assets from or to (depending on the action type)\\n        address secondAddress;\\n        // asset that is to be transfered\\n        address asset;\\n        // index of the vault that is to be modified (if any)\\n        uint256 vaultId;\\n        // amount of asset that is to be transfered\\n        uint256 amount;\\n        // each vault can hold multiple short / long / collateral assets\\n        // but we are restricting the scope to only 1 of each in this version\\n        // in future versions this would be the index of the short / long / collateral asset that needs to be modified\\n        uint256 index;\\n        // any other data that needs to be passed in for arbitrary function calls\\n        bytes data;\\n    }\\n\\n    struct RedeemArgs {\\n        // address to which we pay out the oToken proceeds\\n        address receiver;\\n        // oToken that is to be redeemed\\n        address otoken;\\n        // amount of oTokens that is to be redeemed\\n        uint256 amount;\\n    }\\n\\n    function getPayout(address _otoken, uint256 _amount)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function operate(ActionArgs[] calldata _actions) external;\\n\\n    function getAccountVaultCounter(address owner)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function oracle() external view returns (address);\\n\\n    function calculator() external view returns(address);\\n\\n    function getVault(address _owner, uint256 _vaultId)\\n        external\\n        view\\n        returns (GammaTypes.Vault memory);\\n\\n    function getProceed(address _owner, uint256 _vaultId)\\n        external\\n        view\\n        returns (uint256);\\n\\n    function isSettlementAllowed(\\n        address _underlying,\\n        address _strike,\\n        address _collateral,\\n        uint256 _expiry\\n    ) external view returns (bool);\\n\\n    function getVaultWithDetails(address _owner, uint256 _vaultId)\\n        external\\n        view\\n        returns (\\n            GammaTypes.MarginVault memory,\\n            uint256,\\n            uint256\\n        );\\n\\n    function setOperator(address _operator, bool _isOperator) external;\\n}\\n\\ninterface IOracle {\\n    function setAssetPricer(address _asset, address _pricer) external;\\n\\n    function updateAssetPricer(address _asset, address _pricer) external;\\n\\n    function getPrice(address _asset) external view returns (uint256);\\n\\n    function isDisputePeriodOver(address _asset, uint256 _expiryTimestamp) external view returns (bool);\\n\\n    function getExpiryPrice(address _asset, uint256 _expiryTimestamp) external view returns (uint256, bool);\\n    \\n    function setExpiryPrice(\\n        address _asset,\\n        uint256 _expiryTimestamp,\\n        uint256 _price\\n    ) external;\\n}\\n\",\"keccak256\":\"0x487af472b5a23cbc30ded295efbc325f496c89977967504d7dcbbbf3499f4818\",\"license\":\"MIT\"},\"contracts/interfaces/IERC20Detailed.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\ninterface IERC20Detailed is IERC20 {\\n    function decimals() external view returns (uint8);\\n\\n    function symbol() external view returns (string calldata);\\n\\n    function name() external view returns (string calldata);\\n}\\n\",\"keccak256\":\"0xa208ac711022752353233b80fac28ca1c314d64687d481f64c934b8cb6383fe1\",\"license\":\"MIT\"},\"contracts/interfaces/IGnosisAuction.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\nlibrary AuctionType {\\n    struct AuctionData {\\n        IERC20 auctioningToken;\\n        IERC20 biddingToken;\\n        uint256 orderCancellationEndDate;\\n        uint256 auctionEndDate;\\n        bytes32 initialAuctionOrder;\\n        uint256 minimumBiddingAmountPerOrder;\\n        uint256 interimSumBidAmount;\\n        bytes32 interimOrder;\\n        bytes32 clearingPriceOrder;\\n        uint96 volumeClearingPriceOrder;\\n        bool minFundingThresholdNotReached;\\n        bool isAtomicClosureAllowed;\\n        uint256 feeNumerator;\\n        uint256 minFundingThreshold;\\n    }\\n}\\n\\ninterface IGnosisAuction {\\n    function initiateAuction(\\n        address _auctioningToken,\\n        address _biddingToken,\\n        uint256 orderCancellationEndDate,\\n        uint256 auctionEndDate,\\n        uint96 _auctionedSellAmount,\\n        uint96 _minBuyAmount,\\n        uint256 minimumBiddingAmountPerOrder,\\n        uint256 minFundingThreshold,\\n        bool isAtomicClosureAllowed,\\n        address accessManagerContract,\\n        bytes memory accessManagerContractData\\n    ) external returns (uint256);\\n\\n    function auctionCounter() external view returns (uint256);\\n\\n    function auctionData(uint256 auctionId)\\n        external\\n        view\\n        returns (AuctionType.AuctionData memory);\\n\\n    function auctionAccessManager(uint256 auctionId)\\n        external\\n        view\\n        returns (address);\\n\\n    function auctionAccessData(uint256 auctionId)\\n        external\\n        view\\n        returns (bytes memory);\\n\\n    function FEE_DENOMINATOR() external view returns (uint256);\\n\\n    function feeNumerator() external view returns (uint256);\\n\\n    function settleAuction(uint256 auctionId) external returns (bytes32);\\n\\n    function placeSellOrders(\\n        uint256 auctionId,\\n        uint96[] memory _minBuyAmounts,\\n        uint96[] memory _sellAmounts,\\n        bytes32[] memory _prevSellOrders,\\n        bytes calldata allowListCallData\\n    ) external returns (uint64);\\n\\n    function claimFromParticipantOrder(\\n        uint256 auctionId,\\n        bytes32[] memory orders\\n    ) external returns (uint256, uint256);\\n}\\n\",\"keccak256\":\"0xa4711fa0762652c5a5dea98c2d5345db4ba6e5154c0a78dd299214b2ba26d5f5\",\"license\":\"MIT\"},\"contracts/interfaces/IHimalayan.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\nimport {Vault} from \\\"../libraries/Vault.sol\\\";\\n\\ninterface IHimalayan {\\n    function deposit(uint256 amount) external;\\n\\n    function depositETH() external payable;\\n\\n    function cap() external view returns (uint256);\\n\\n    function depositFor(uint256 amount, address creditor) external;\\n\\n    function vaultParams() external view returns (Vault.VaultParams memory);\\n}\\n\\ninterface IStrikeSelectionSpread {\\n    function getStrikePrices(uint256 expiryTimestamp, bool isPut)\\n        external\\n        view\\n        returns (uint256[] memory, uint256[] memory);\\n\\n    function delta() external view returns (uint256);\\n}\\n\\ninterface IOptionsPremiumPricer {\\n    function getPremium(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getPremiumInStables(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getOptionDelta(\\n        uint256 spotPrice,\\n        uint256 strikePrice,\\n        uint256 volatility,\\n        uint256 expiryTimestamp\\n    ) external view returns (uint256 delta);\\n\\n    function getUnderlyingPrice() external view returns (uint256);\\n\\n    function priceOracle() external view returns (address);\\n\\n    function volatilityOracle() external view returns (address);\\n\\n    function optionId() external view returns (bytes32);\\n}\\n\\ninterface ISpreadToken {\\n\\n    function init(\\n        string calldata name,\\n        string calldata symbol,\\n        address _asset,\\n        address _underlying\\n    )\\n        external;\\n\\n    function mint(uint256 amount) external;\\n\\n    function settleVault() external;\\n\\n    function burnAndClaim() external;\\n}\\n\",\"keccak256\":\"0x186362dc92a2b947dc42d6e2fcbd7ee0e9ee16ef90ba067794b87ef0cb25d14e\",\"license\":\"MIT\"},\"contracts/interfaces/IRibbon.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\nimport {Vault} from \\\"../libraries/Vault.sol\\\";\\n\\ninterface IRibbonVault {\\n    function deposit(uint256 amount) external;\\n\\n    function depositETH() external payable;\\n\\n    function cap() external view returns (uint256);\\n\\n    function depositFor(uint256 amount, address creditor) external;\\n\\n    function vaultParams() external view returns (Vault.VaultParams memory);\\n}\\n\\ninterface IStrikeSelection {\\n    function getStrikePrice(uint256 expiryTimestamp, bool isPut)\\n        external\\n        view\\n        returns (uint256, uint256);\\n\\n    function delta() external view returns (uint256);\\n}\\n\\ninterface IOptionsPremiumPricer {\\n    function getPremium(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getPremiumInStables(\\n        uint256 strikePrice,\\n        uint256 timeToExpiry,\\n        bool isPut\\n    ) external view returns (uint256);\\n\\n    function getOptionDelta(\\n        uint256 spotPrice,\\n        uint256 strikePrice,\\n        uint256 volatility,\\n        uint256 expiryTimestamp\\n    ) external view returns (uint256 delta);\\n\\n    function getUnderlyingPrice() external view returns (uint256);\\n\\n    function priceOracle() external view returns (address);\\n\\n    function volatilityOracle() external view returns (address);\\n\\n    function optionId() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0xcd2771e05807134f682ae5e56dd4964f9235a1fe992a66064713a0fa924427fb\",\"license\":\"MIT\"},\"contracts/interfaces/IRibbonThetaVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {Vault} from \\\"../libraries/Vault.sol\\\";\\n\\ninterface IRibbonThetaVault {\\n    function currentOption() external view returns (address);\\n\\n    function nextOption() external view returns (address);\\n\\n    function vaultParams() external view returns (Vault.VaultParams memory);\\n\\n    function vaultState() external view returns (Vault.VaultState memory);\\n\\n    function optionState() external view returns (Vault.OptionState memory);\\n\\n    function optionAuctionID() external view returns (uint256);\\n\\n    function pricePerShare() external view returns (uint256);\\n\\n    function roundPricePerShare(uint256) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x6d793613cb0654a21b449ac36e2590c470656053c1139ba7d638f007302b7cc9\",\"license\":\"MIT\"},\"contracts/libraries/GnosisAuction.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {\\n    SafeERC20\\n} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\nimport {DSMath} from \\\"../vendor/DSMath.sol\\\";\\nimport {IGnosisAuction} from \\\"../interfaces/IGnosisAuction.sol\\\";\\nimport {IOtoken} from \\\"../interfaces/GammaInterface.sol\\\";\\nimport {IOptionsPremiumPricer} from \\\"../interfaces/IRibbon.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\nimport {IRibbonThetaVault} from \\\"../interfaces/IRibbonThetaVault.sol\\\";\\n\\nlibrary GnosisAuction {\\n    using SafeERC20 for IERC20;\\n\\n    event InitiateGnosisAuction(\\n        address indexed auctioningToken,\\n        address indexed biddingToken,\\n        uint256 auctionCounter,\\n        address indexed manager\\n    );\\n\\n    event PlaceAuctionBid(\\n        uint256 auctionId,\\n        address indexed auctioningToken,\\n        uint256 sellAmount,\\n        uint256 buyAmount,\\n        address indexed bidder\\n    );\\n\\n    struct AuctionDetails {\\n        address tokenAddress;// Token to sell\\n        address gnosisEasyAuction;\\n        address asset;\\n        uint256 assetDecimals;\\n        uint256 premium;\\n        uint256 duration;\\n    }\\n\\n    struct BidDetails {\\n        address tokenAddress;// Token to sell\\n        address gnosisEasyAuction;\\n        address asset;\\n        uint256 assetDecimals;\\n        uint256 auctionId;\\n        uint256 lockedBalance;\\n        uint256 optionAllocation;\\n        uint256 optionPremium;\\n        address bidder;\\n    }\\n\\n    function startAuction(AuctionDetails calldata auctionDetails)\\n        internal\\n        returns (uint256 auctionID)\\n    {\\n        uint256 oTokenSellAmount =\\n            getOTokenSellAmount(auctionDetails.tokenAddress);\\n        require(oTokenSellAmount > 0, \\\"No otokens to sell\\\");\\n\\n        IERC20(auctionDetails.tokenAddress).safeApprove(\\n            auctionDetails.gnosisEasyAuction,\\n            IERC20(auctionDetails.tokenAddress).balanceOf(address(this))\\n        );\\n\\n        // minBidAmount is total oTokens to sell * premium per oToken\\n        // shift decimals to correspond to decimals of USDC for puts\\n        // and underlying for calls\\n        uint256 minBidAmount =\\n            DSMath.wmul(\\n                oTokenSellAmount * (10**10),\\n                auctionDetails.premium\\n            );\\n\\n        minBidAmount = auctionDetails.assetDecimals > 18\\n            ? minBidAmount * (10**(auctionDetails.assetDecimals - (18)))\\n            : minBidAmount / (\\n                10**(uint256(18) - (auctionDetails.assetDecimals))\\n            );\\n\\n        require(\\n            minBidAmount <= type(uint96).max,\\n            \\\"optionPremium * oTokenSellAmount > type(uint96) max value!\\\"\\n        );\\n\\n        uint256 auctionEnd = block.timestamp + (auctionDetails.duration);\\n\\n        auctionID = IGnosisAuction(auctionDetails.gnosisEasyAuction)\\n            .initiateAuction(\\n            // address of oToken we minted and are selling\\n            auctionDetails.tokenAddress,\\n            // address of asset we want in exchange for oTokens. Should match vault `asset`\\n            auctionDetails.asset,\\n            // orders can be cancelled at any time during the auction\\n            auctionEnd,\\n            // order will last for `duration`\\n            auctionEnd,\\n            // we are selling all of the otokens minus a fee taken by gnosis\\n            uint96(oTokenSellAmount),\\n            // the minimum we are willing to sell all the oTokens for. A discount is applied on black-scholes price\\n            uint96(minBidAmount),\\n            // the minimum bidding amount must be 1 * 10 ** -assetDecimals\\n            1,\\n            // the min funding threshold\\n            0,\\n            // no atomic closure\\n            false,\\n            // access manager contract\\n            address(0),\\n            // bytes for storing info like a whitelist for who can bid\\n            bytes(\\\"\\\")\\n        );\\n\\n        emit InitiateGnosisAuction(\\n            auctionDetails.tokenAddress,\\n            auctionDetails.asset,\\n            auctionID,\\n            msg.sender\\n        );\\n    }\\n\\n    function placeBid(BidDetails calldata bidDetails)\\n        internal\\n        returns (\\n            uint256 sellAmount,\\n            uint256 buyAmount,\\n            uint64 userId\\n        )\\n    {\\n        // calculate how much to allocate\\n        sellAmount = bidDetails\\n            .lockedBalance\\n            * (bidDetails.optionAllocation)\\n            / (100 * Vault.OPTION_ALLOCATION_MULTIPLIER);\\n\\n        // divide the `asset` sellAmount by the target premium per oToken to\\n        // get the number of oTokens to buy (8 decimals)\\n        buyAmount = sellAmount\\n            * (10**(bidDetails.assetDecimals + (Vault.OTOKEN_DECIMALS)))\\n            / (bidDetails.optionPremium)\\n            / (10**bidDetails.assetDecimals);\\n\\n        require(\\n            sellAmount <= type(uint96).max,\\n            \\\"sellAmount > type(uint96) max value!\\\"\\n        );\\n        require(\\n            buyAmount <= type(uint96).max,\\n            \\\"buyAmount > type(uint96) max value!\\\"\\n        );\\n\\n        // approve that amount\\n        IERC20(bidDetails.asset).safeApprove(\\n            bidDetails.gnosisEasyAuction,\\n            sellAmount\\n        );\\n\\n        uint96[] memory _minBuyAmounts = new uint96[](1);\\n        uint96[] memory _sellAmounts = new uint96[](1);\\n        bytes32[] memory _prevSellOrders = new bytes32[](1);\\n        _minBuyAmounts[0] = uint96(buyAmount);\\n        _sellAmounts[0] = uint96(sellAmount);\\n        _prevSellOrders[\\n            0\\n        ] = 0x0000000000000000000000000000000000000000000000000000000000000001;\\n\\n        // place sell order with that amount\\n        userId = IGnosisAuction(bidDetails.gnosisEasyAuction).placeSellOrders(\\n            bidDetails.auctionId,\\n            _minBuyAmounts,\\n            _sellAmounts,\\n            _prevSellOrders,\\n            \\\"0x\\\"\\n        );\\n\\n        emit PlaceAuctionBid(\\n            bidDetails.auctionId,\\n            bidDetails.tokenAddress,\\n            sellAmount,\\n            buyAmount,\\n            bidDetails.bidder\\n        );\\n\\n        return (sellAmount, buyAmount, userId);\\n    }\\n\\n    function claimAuctionOtokens(\\n        Vault.AuctionSellOrder calldata auctionSellOrder,\\n        address gnosisEasyAuction,\\n        address counterpartyThetaVault\\n    ) internal {\\n        bytes32 order =\\n            encodeOrder(\\n                auctionSellOrder.userId,\\n                auctionSellOrder.buyAmount,\\n                auctionSellOrder.sellAmount\\n            );\\n        bytes32[] memory orders = new bytes32[](1);\\n        orders[0] = order;\\n        IGnosisAuction(gnosisEasyAuction).claimFromParticipantOrder(\\n            IRibbonThetaVault(counterpartyThetaVault).optionAuctionID(),\\n            orders\\n        );\\n    }\\n\\n    function getOTokenSellAmount(address tokenAddress)\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        // We take our current oToken balance. That will be our sell amount\\n        // but otokens will be transferred to gnosis.\\n        uint256 oTokenSellAmount =\\n            IERC20(tokenAddress).balanceOf(address(this));\\n\\n        require(\\n            oTokenSellAmount <= type(uint96).max,\\n            \\\"oTokenSellAmount > type(uint96) max value!\\\"\\n        );\\n\\n        return oTokenSellAmount;\\n    }\\n\\n    function getOTokenPremiumInStables(\\n        address tokenAddress,\\n        address optionsPremiumPricer,\\n        uint256 premiumDiscount\\n    ) internal view returns (uint256) {\\n        IOtoken newOToken = IOtoken(tokenAddress);\\n        IOptionsPremiumPricer premiumPricer =\\n            IOptionsPremiumPricer(optionsPremiumPricer);\\n\\n        // Apply black-scholes formula (from rvol library) to option given its features\\n        // and get price for 100 contracts denominated USDC for both call and put options\\n        uint256 optionPremium =\\n            premiumPricer.getPremiumInStables(\\n                newOToken.strikePrice(),\\n                newOToken.expiryTimestamp(),\\n                newOToken.isPut()\\n            );\\n\\n        // Apply a discount to incentivize arbitraguers\\n        optionPremium = optionPremium / (premiumDiscount) / (\\n            100 * Vault.PREMIUM_DISCOUNT_MULTIPLIER\\n        );\\n\\n        require(\\n            optionPremium <= type(uint96).max,\\n            \\\"optionPremium > type(uint96) max value!\\\"\\n        );\\n\\n        return optionPremium;\\n    }\\n\\n    function encodeOrder(\\n        uint64 userId,\\n        uint96 buyAmount,\\n        uint96 sellAmount\\n    ) internal pure returns (bytes32) {\\n        return\\n            bytes32(\\n                (uint256(userId) << 192) +\\n                    (uint256(buyAmount) << 96) +\\n                    uint256(sellAmount)\\n            );\\n    }\\n}\\n\",\"keccak256\":\"0xd96f0f8c7c001946e9704fdcc88a8fdecac531007289279eac3cf2497f234926\",\"license\":\"MIT\"},\"contracts/libraries/ShareMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {SafeMath} from \\\"@openzeppelin/contracts/utils/math/SafeMath.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\n\\nlibrary ShareMath {\\n    using SafeMath for uint256;\\n\\n    uint256 internal constant PLACEHOLDER_UINT = 1;\\n\\n    function assetToShares(\\n        uint256 assetAmount,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        // If this throws, it means that vault's roundPricePerShare[currentRound] has not been set yet\\n        // which should never happen.\\n        // Has to be larger than 1 because `1` is used in `initRoundPricePerShares` to prevent cold writes.\\n        require(assetPerShare > PLACEHOLDER_UINT, \\\"Invalid assetPerShare\\\");\\n\\n        return assetAmount.mul(10**decimals).div(assetPerShare);\\n    }\\n\\n    function sharesToAsset(\\n        uint256 shares,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        // If this throws, it means that vault's roundPricePerShare[currentRound] has not been set yet\\n        // which should never happen.\\n        // Has to be larger than 1 because `1` is used in `initRoundPricePerShares` to prevent cold writes.\\n        require(assetPerShare > PLACEHOLDER_UINT, \\\"Invalid assetPerShare\\\");\\n\\n        return shares.mul(assetPerShare).div(10**decimals);\\n    }\\n\\n    /**\\n     * @notice Returns the shares unredeemed by the user given their DepositReceipt\\n     * @param depositReceipt is the user's deposit receipt\\n     * @param currentRound is the `round` stored on the vault\\n     * @param assetPerShare is the price in asset per share\\n     * @param decimals is the number of decimals the asset/shares use\\n     * @return unredeemedShares is the user's virtual balance of shares that are owed\\n     */\\n    function getSharesFromReceipt(\\n        Vault.DepositReceipt memory depositReceipt,\\n        uint256 currentRound,\\n        uint256 assetPerShare,\\n        uint256 decimals\\n    ) internal pure returns (uint256 unredeemedShares) {\\n        if (depositReceipt.round > 0 && depositReceipt.round < currentRound) {\\n            uint256 sharesFromRound =\\n                assetToShares(depositReceipt.amount, assetPerShare, decimals);\\n\\n            return\\n                uint256(depositReceipt.unredeemedShares).add(sharesFromRound);\\n        }\\n        return depositReceipt.unredeemedShares;\\n    }\\n\\n    function pricePerShare(\\n        uint256 totalSupply,\\n        uint256 totalBalance,\\n        uint256 pendingAmount,\\n        uint256 decimals\\n    ) internal pure returns (uint256) {\\n        uint256 singleShare = 10**decimals;\\n        return\\n            totalSupply > 0\\n                ? singleShare.mul(totalBalance.sub(pendingAmount)).div(\\n                    totalSupply\\n                )\\n                : singleShare;\\n    }\\n\\n    /************************************************\\n     *  HELPERS\\n     ***********************************************/\\n\\n    function assertUint104(uint256 num) internal pure {\\n        require(num <= type(uint104).max, \\\"Overflow uint104\\\");\\n    }\\n\\n    function assertUint128(uint256 num) internal pure {\\n        require(num <= type(uint128).max, \\\"Overflow uint128\\\");\\n    }\\n}\\n\",\"keccak256\":\"0x1f5d84b792cddd1f1be3d4d721799bd38d52f5eabb95ace60e46a07cebf2df45\",\"license\":\"MIT\"},\"contracts/libraries/SupportsNonCompliantERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {\\n    SafeERC20\\n} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\n\\n/**\\n * This library supports ERC20s that have quirks in their behavior.\\n * One such ERC20 is USDT, which requires allowance to be 0 before calling approve.\\n * We plan to update this library with ERC20s that display such idiosyncratic behavior.\\n */\\nlibrary SupportsNonCompliantERC20 {\\n    address private constant USDT = 0xdAC17F958D2ee523a2206206994597C13D831ec7;\\n\\n    function safeApproveNonCompliant(\\n        IERC20 token,\\n        address spender,\\n        uint256 amount\\n    ) internal {\\n        if (address(token) == USDT) {\\n            SafeERC20.safeApprove(token, spender, 0);\\n        }\\n        SafeERC20.safeApprove(token, spender, amount);\\n    }\\n}\\n\",\"keccak256\":\"0x2bd1229e3a5514c2138c7504b9c58d066adf9f37c4971e47ac79c89a3782ee79\",\"license\":\"MIT\"},\"contracts/libraries/Vault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nlibrary Vault {\\n    /************************************************\\n     *  IMMUTABLES & CONSTANTS\\n     ***********************************************/\\n\\n    // Fees are 6-decimal places. For example: 20 * 10**6 = 20%\\n    uint256 internal constant FEE_MULTIPLIER = 10**6;\\n\\n    // Premium discount has 1-decimal place. For example: 80 * 10**1 = 80%. Which represents a 20% discount.\\n    uint256 internal constant PREMIUM_DISCOUNT_MULTIPLIER = 10;\\n\\n    // Otokens have 8 decimal places.\\n    uint256 internal constant OTOKEN_DECIMALS = 8;\\n\\n    // Percentage of funds allocated to options is 2 decimal places. 10 * 10**2 = 10%\\n    uint256 internal constant OPTION_ALLOCATION_MULTIPLIER = 10**2;\\n\\n    // Placeholder uint value to prevent cold writes\\n    uint256 internal constant PLACEHOLDER_UINT = 1;\\n\\n    struct VaultParams {\\n        // Option type the vault is selling\\n        bool isPut;\\n        // Vault type\\n        bool isSpread;\\n        // Token decimals for vault shares\\n        uint8 decimals;\\n        // Asset used in Theta / Delta Vault\\n        address asset;\\n        // Underlying asset of the options sold by vault\\n        address underlying;\\n        // Minimum supply of the vault shares issued, for ETH it's 10**10\\n        uint56 minimumSupply;\\n        // Vault cap\\n        uint104 cap;\\n    }\\n\\n    struct OptionState {\\n        // Option that the vault is shorting / longing in the next cycle\\n        address nextOption;\\n        // Option that the vault is currently shorting / longing\\n        address currentOption;\\n        // The timestamp when the `nextOption` can be used by the vault\\n        uint32 nextOptionReadyAt;\\n    }\\n\\n    struct SpreadState {\\n        // Options that are part of the vault's next strategy, if spread\\n        // Both options should have same params apart from the strike price\\n        address[] nextSpread;\\n        // Options that are the part of vault's current strategy\\n        address[] currentSpread;\\n        // The timestamp when the `nextOption` can be used by the vault\\n        uint32 nextOptionReadyAt;\\n        //Used in spread vaults\\n        address currentSpreadToken;\\n        //Used in spread vaults\\n        address nextSpreadToken;\\n    }\\n\\n    struct VaultState {\\n        // 32 byte slot 1\\n        //  Current round number. `round` represents the number of `period`s elapsed.\\n        uint16 round;\\n        // Amount that is currently locked for selling options\\n        uint104 lockedAmount;\\n        // Amount that was locked for selling options in the previous round\\n        // used for calculating performance fee deduction\\n        uint104 lastLockedAmount;\\n        // Locked amount which is unsed so far\\n        uint104 lockedAmountUsed;\\n        // 32 byte slot 2\\n        // Stores the total tally of how much of `asset` there is\\n        // to be used to mint rTHETA tokens\\n        uint128 totalPending;\\n        // Total amount of queued withdrawal shares from previous rounds (doesn't include the current round)\\n        uint128 queuedWithdrawShares;\\n    }\\n\\n    struct DepositReceipt {\\n        // Maximum of 65535 rounds. Assuming 1 round is 7 days, maximum is 1256 years.\\n        uint16 round;\\n        // Deposit amount, max 20,282,409,603,651 or 20 trillion ETH deposit\\n        uint104 amount;\\n        // Unredeemed shares balance\\n        uint128 unredeemedShares;\\n    }\\n\\n    struct Withdrawal {\\n        // Maximum of 65535 rounds. Assuming 1 round is 7 days, maximum is 1256 years.\\n        uint16 round;\\n        // Number of shares withdrawn\\n        uint128 shares;\\n    }\\n\\n    struct AuctionSellOrder {\\n        // Amount of `asset` token offered in auction\\n        uint96 sellAmount;\\n        // Amount of oToken requested in auction\\n        uint96 buyAmount;\\n        // User Id of delta vault in latest gnosis auction\\n        uint64 userId;\\n    }\\n}\\n\",\"keccak256\":\"0x40fe5c657556512e4444185132855c32ba1c57a13c705b440f67808a2740cd39\",\"license\":\"MIT\"},\"contracts/libraries/VaultLifecycleSpread.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity =0.8.17;\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {Clones} from \\\"@openzeppelin/contracts/proxy/Clones.sol\\\";\\nimport {Address} from \\\"@openzeppelin/contracts/utils/Address.sol\\\";\\nimport {Vault} from \\\"./Vault.sol\\\";\\nimport {ShareMath} from \\\"./ShareMath.sol\\\";\\nimport {IStrikeSelectionSpread, ISpreadToken} from \\\"../interfaces/IHimalayan.sol\\\";\\nimport {GnosisAuction} from \\\"./GnosisAuction.sol\\\";\\nimport {\\n    IOtokenFactory,\\n    IOtoken,\\n    IController,\\n    IMarginCalculator,\\n    GammaTypes\\n} from \\\"../interfaces/GammaInterface.sol\\\";\\nimport {IERC20Detailed} from \\\"../interfaces/IERC20Detailed.sol\\\";\\nimport {IGnosisAuction} from \\\"../interfaces/IGnosisAuction.sol\\\";\\nimport {SupportsNonCompliantERC20} from \\\"./SupportsNonCompliantERC20.sol\\\";\\nimport {IOptionsPremiumPricer} from \\\"../interfaces/IHimalayan.sol\\\";\\n\\nlibrary VaultLifecycleSpread {\\n    using SupportsNonCompliantERC20 for IERC20;\\n    using Address for address;\\n    using Clones for address;\\n\\n    struct CloseParams {\\n        address OTOKEN_FACTORY;\\n        address USDC;\\n        address[] currentSpread;\\n        uint256 delay;\\n        address strikeSelection;\\n        uint256 premiumDiscount;\\n        address SPREAD_TOKEN_IMPL;\\n    }\\n\\n    /// @notice Default maximum option allocation for the queue (50%)\\n    uint256 internal constant QUEUE_OPTION_ALLOCATION = 5000;\\n\\n    /**\\n     * @notice Sets the next spread for the vault, and calculates its premium for the auction\\n     * @param closeParams is the struct with details on previous spread and strike selection details\\n     * @param vaultParams is the struct with vault general data\\n     * @param vaultState is the struct with vault accounting state\\n     * @return spread addresses of the new short and long options\\n     * @return strikePrices is the strike prices of the options in spread\\n     * @return deltas is the deltas of the new options in the spread\\n     */\\n    function commitAndClose(\\n        CloseParams calldata closeParams,\\n        Vault.VaultParams storage vaultParams,\\n        Vault.VaultState storage vaultState\\n    )\\n        external\\n        returns (\\n            address[] memory spread,\\n            uint256[] memory strikePrices,\\n            uint256[] memory deltas,\\n            address spreadToken\\n        )\\n    {\\n        uint256 expiry = getNextExpiry(closeParams.currentSpread.length > 0 ? closeParams.currentSpread[0]:address(0));\\n\\n        IStrikeSelectionSpread selection =\\n            IStrikeSelectionSpread(closeParams.strikeSelection);\\n\\n        bool isPut = vaultParams.isPut;\\n        address underlying = vaultParams.underlying;\\n        address asset = vaultParams.asset;\\n\\n        (strikePrices, deltas) = selection.getStrikePrices(expiry, isPut);\\n\\n        require(strikePrices.length == deltas.length, \\\"Invalid Data\\\");\\n        for (uint256 i = 0; i < strikePrices.length; i++) {\\n            require(strikePrices[i] != 0, \\\"!strikePrice\\\");\\n        }\\n        \\n\\n        // retrieve address if option already exists, or deploy it\\n        spread = getOrDeployOtokens(\\n            closeParams,\\n            vaultParams,\\n            underlying,\\n            asset,\\n            strikePrices,\\n            expiry,\\n            isPut\\n        );\\n\\n        spreadToken = deploySpreadToken(\\n            closeParams.SPREAD_TOKEN_IMPL,\\n            \\\"Call Spread Token\\\",\\n            \\\"CST\\\",\\n            asset,\\n            underlying\\n        );\\n\\n        return (spread, strikePrices, deltas, spreadToken);\\n    }\\n\\n    function deploySpreadToken(\\n        address impl,\\n        string memory name,\\n        string memory symbol,\\n        address asset,\\n        address underlying\\n    )\\n        private\\n        returns(address)\\n    {\\n\\n        address instance = impl.clone();\\n        ISpreadToken(instance).init(\\n            name,\\n            symbol,\\n            asset,\\n            underlying\\n        );\\n\\n        return instance;\\n    }\\n\\n    /**\\n     * @notice Verify the otoken has the correct parameters to prevent vulnerability to opyn contract changes\\n     * @param otokenAddress is the address of the otoken\\n     * @param vaultParams is the struct with vault general data\\n     * @param collateralAsset is the address of the collateral asset\\n     * @param USDC is the address of usdc\\n     * @param delay is the delay between commitAndClose and rollToNextOption\\n     */\\n    function verifyOtoken(\\n        address otokenAddress,\\n        Vault.VaultParams storage vaultParams,\\n        address collateralAsset,\\n        address USDC,\\n        uint256 delay\\n    ) private view {\\n        require(otokenAddress != address(0), \\\"!otokenAddress\\\");\\n\\n        IOtoken otoken = IOtoken(otokenAddress);\\n        require(otoken.isPut() == vaultParams.isPut, \\\"Type mismatch\\\");\\n        require(\\n            otoken.underlyingAsset() == vaultParams.underlying,\\n            \\\"Wrong underlyingAsset\\\"\\n        );\\n        require(\\n            otoken.collateralAsset() == collateralAsset,\\n            \\\"Wrong collateralAsset\\\"\\n        );\\n\\n        // we just assume all options use USDC as the strike\\n        require(otoken.strikeAsset() == USDC, \\\"strikeAsset != USDC\\\");\\n\\n        uint256 readyAt = block.timestamp  + delay;\\n        require(otoken.expiryTimestamp() >= readyAt, \\\"Expiry before delay\\\");\\n    }\\n\\n    /**\\n     * @param decimals is the decimals of the asset\\n     * @param totalBalance is the vaults total balance of the asset\\n     * @param currentShareSupply is the supply of the shares invoked with totalSupply()\\n     * @param lastQueuedWithdrawAmount is the total amount queued for withdrawals\\n     * @param performanceFee is the perf fee percent to charge on premiums\\n     * @param managementFee is the management fee percent to charge on the AUM\\n     * @param currentQueuedWithdrawShares is amount of queued withdrawals from the current round\\n     */\\n    struct RolloverParams {\\n        uint256 decimals;\\n        uint256 totalBalance;\\n        uint256 currentShareSupply;\\n        uint256 lastQueuedWithdrawAmount;\\n        uint256 performanceFee;\\n        uint256 managementFee;\\n        uint256 currentQueuedWithdrawShares;\\n    }\\n\\n    /**\\n     * @notice Calculate the shares to mint, new price per share, and\\n      amount of funds to re-allocate as collateral for the new round\\n     * @param vaultState is the storage variable vaultState passed from RibbonVault\\n     * @param params is the rollover parameters passed to compute the next state\\n     * @return newLockedAmount is the amount of funds to allocate for the new round\\n     * @return queuedWithdrawAmount is the amount of funds set aside for withdrawal\\n     * @return newPricePerShare is the price per share of the new round\\n     * @return mintShares is the amount of shares to mint from deposits\\n     * @return performanceFeeInAsset is the performance fee charged by vault\\n     * @return totalVaultFee is the total amount of fee charged by vault\\n     */\\n    function rollover(\\n        Vault.VaultState storage vaultState,\\n        RolloverParams calldata params\\n    )\\n        external\\n        view\\n        returns (\\n            uint256 newLockedAmount,\\n            uint256 queuedWithdrawAmount,\\n            uint256 newPricePerShare,\\n            uint256 mintShares,\\n            uint256 performanceFeeInAsset,\\n            uint256 totalVaultFee\\n        )\\n    {\\n        uint256 currentBalance = params.totalBalance;\\n        uint256 pendingAmount = vaultState.totalPending;\\n        // Total amount of queued withdrawal shares from previous rounds (doesn't include the current round)\\n        uint256 lastQueuedWithdrawShares = vaultState.queuedWithdrawShares;\\n\\n        // Deduct older queued withdraws so we don't charge fees on them\\n        uint256 balanceForVaultFees =\\n            currentBalance - params.lastQueuedWithdrawAmount;\\n\\n        {\\n            (performanceFeeInAsset, , totalVaultFee) = VaultLifecycleSpread\\n                .getVaultFees(\\n                balanceForVaultFees,\\n                vaultState.lastLockedAmount,\\n                vaultState.totalPending,\\n                params.performanceFee,\\n                params.managementFee\\n            );\\n        }\\n\\n        // Take into account the fee\\n        // so we can calculate the newPricePerShare\\n        currentBalance = currentBalance - totalVaultFee;\\n\\n        {\\n            newPricePerShare = ShareMath.pricePerShare(\\n                params.currentShareSupply - lastQueuedWithdrawShares,\\n                currentBalance - params.lastQueuedWithdrawAmount,\\n                pendingAmount,\\n                params.decimals\\n            );\\n\\n            queuedWithdrawAmount = params.lastQueuedWithdrawAmount +\\n                ShareMath.sharesToAsset(\\n                    params.currentQueuedWithdrawShares,\\n                    newPricePerShare,\\n                    params.decimals\\n                );\\n\\n            // After closing the short, if the options expire in-the-money\\n            // vault pricePerShare would go down because vault's asset balance decreased.\\n            // This ensures that the newly-minted shares do not take on the loss.\\n            mintShares = ShareMath.assetToShares(\\n                pendingAmount,\\n                newPricePerShare,\\n                params.decimals\\n            );\\n        }\\n\\n        return (\\n            currentBalance - queuedWithdrawAmount, // new locked balance subtracts the queued withdrawals\\n            queuedWithdrawAmount,\\n            newPricePerShare,\\n            mintShares,\\n            performanceFeeInAsset,\\n            totalVaultFee\\n        );\\n    }\\n\\n    /**\\n     * @notice Creates the actual Opyn short position by depositing collateral and minting otokens\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param marginPool is the address of the opyn margin contract which holds the collateral\\n     * @param spread Spread oTokens\\n     * @param depositAmount is the amount of collateral to deposit\\n     * @param spreadToken Spread Token\\n     * @return mintAmount spreadToken mint amount\\n     * @return collateralUsed collateral amount used to create spread\\n     */\\n    function createSpread(\\n        address gammaController,\\n        address marginPool,\\n        address[] calldata spread,\\n        uint256 depositAmount,\\n        address spreadToken\\n    ) public returns (uint256 mintAmount, uint256 collateralUsed) {\\n        IController controller = IController(gammaController);\\n        uint256 newVaultID =\\n            (controller.getAccountVaultCounter(address(this))) + 1;\\n\\n        \\n        // An otoken's collateralAsset is the vault's `asset`\\n        // So in the context of performing Opyn short operations we call them collateralAsset\\n        // Assuming both oTokens in the spread has same collateral\\n        IOtoken oToken = IOtoken(spread[0]);\\n        address collateralAsset = oToken.collateralAsset();\\n        {\\n            uint256 collateralDecimals =\\n            uint256(IERC20Detailed(collateralAsset).decimals());\\n\\n            if (oToken.isPut()) {\\n                // For minting puts, there will be instances where the full depositAmount will not be used for minting.\\n                // This is because of an issue with precision.\\n                //\\n                // For ETH put options, we are calculating the mintAmount (10**8 decimals) using\\n                // the depositAmount (10**18 decimals), which will result in truncation of decimals when scaling down.\\n                // As a result, there will be tiny amounts of dust left behind in the Opyn vault when minting put otokens.\\n                //\\n                // For simplicity's sake, we do not refund the dust back to the address(this) on minting otokens.\\n                // We retain the dust in the vault so the calling contract can withdraw the\\n                // actual locked amount + dust at settlement.\\n                //\\n                // To test this behavior, we can console.log\\n                // MarginCalculatorInterface(0x7A48d10f372b3D7c60f6c9770B91398e4ccfd3C7).getExcessCollateral(vault)\\n                // to see how much dust (or excess collateral) is left behind.\\n                mintAmount = depositAmount\\n                    * (10**Vault.OTOKEN_DECIMALS)\\n                    * (10**18) // we use 10**18 to give extra precision\\n                    / (oToken.strikePrice() * (10**(10 + collateralDecimals)));\\n            } else {\\n                mintAmount = depositAmount;\\n\\n                if (collateralDecimals > 8) {\\n                    uint256 scaleBy = 10**(collateralDecimals - 8); // oTokens have 8 decimals\\n                    if (mintAmount > scaleBy) {\\n                        mintAmount = depositAmount / (scaleBy); // scale down from 10**18 to 10**8\\n                    }\\n                }\\n            }\\n        }\\n\\n        {\\n            // double approve to fix non-compliant ERC20s\\n            IERC20 collateralToken = IERC20(collateralAsset);\\n            collateralToken.safeApproveNonCompliant(marginPool, depositAmount);\\n\\n            IController.ActionArgs[] memory actions =\\n                new IController.ActionArgs[](3);\\n\\n            actions[0] = IController.ActionArgs(\\n                IController.ActionType.OpenVault,\\n                address(this), // owner\\n                address(this), // receiver\\n                address(0), // asset, otoken\\n                newVaultID, // vaultId\\n                0, // amount\\n                0, //index\\n                \\\"\\\" //data\\n            );\\n\\n            actions[1] = IController.ActionArgs(\\n                IController.ActionType.DepositCollateral,\\n                address(this), // owner\\n                address(this), // address to transfer from\\n                collateralAsset, // deposited asset\\n                newVaultID, // vaultId\\n                depositAmount, // amount\\n                0, //index\\n                \\\"\\\" //data\\n            );\\n\\n            actions[2] = IController.ActionArgs(\\n                IController.ActionType.MintShortOption,\\n                address(this), // owner\\n                address(this), // address to transfer to\\n                spread[0], // short option address\\n                newVaultID, // vaultId\\n                mintAmount, // amount\\n                0, //index\\n                \\\"\\\" //data\\n            );\\n\\n            controller.operate(actions);\\n        \\n        }\\n        \\n        _mintSpread(\\n            gammaController,\\n            marginPool,\\n            spread,\\n            mintAmount,\\n            spreadToken\\n        );\\n\\n        collateralUsed = _depositAndWithdrawCollateral(\\n            gammaController,\\n            marginPool,\\n            collateralAsset,\\n            depositAmount,\\n            newVaultID,\\n            spread,\\n            mintAmount\\n        );\\n\\n        return (mintAmount, collateralUsed);\\n    }\\n\\n    function _mintSpread(\\n        address gammaController,\\n        address marginPool,\\n        address[] memory spread,\\n        uint256 mintAmount,\\n        address spreadToken\\n    )\\n        private\\n    {\\n        IController controller = IController(gammaController);\\n        IERC20 shortOption= IERC20(spread[0]);\\n        shortOption.safeApproveNonCompliant(marginPool, mintAmount);\\n\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](2);\\n        \\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.DepositLongOption,\\n            spreadToken, // vault owner\\n            address(this), // deposit from this address\\n            spread[0], // collateral otoken\\n            1, // vaultId\\n            mintAmount, // amount\\n            0, // index\\n            \\\"\\\" // data\\n        );\\n\\n        actions[1] = IController.ActionArgs(\\n          IController.ActionType.MintShortOption,\\n          spreadToken, // vault owner\\n          address(this), // mint to this address\\n          spread[1], // otoken\\n          1, // vaultId\\n          mintAmount, // amount\\n          0, // index\\n          \\\"\\\" // data\\n        );\\n\\n        controller.operate(actions);\\n    }\\n\\n    function _depositAndWithdrawCollateral(\\n        address gammaController,\\n        address marginPool,\\n        address collateralAsset,\\n        uint256 collateralDeposited,\\n        uint256 vaultId,\\n        address[] memory spread,\\n        uint256 mintAmount\\n    )\\n        private\\n        returns(uint256 collateralUsed)\\n    {\\n        IController controller = IController(gammaController);\\n        IMarginCalculator calculator = IMarginCalculator(controller.calculator());\\n\\n        IERC20 longOption = IERC20(spread[1]);\\n        longOption.safeApproveNonCompliant(marginPool, mintAmount);\\n\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](1);\\n        \\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.DepositLongOption,\\n            address(this), // vault owner\\n            address(this), // deposit from this address\\n            spread[1], // LONG otoken\\n            vaultId, // vaultId\\n            mintAmount, // amount\\n            0, // index\\n            \\\"\\\" // data\\n        );\\n\\n        controller.operate(actions);\\n\\n        (GammaTypes.MarginVault memory vault, uint256 typeVault, ) = controller.getVaultWithDetails(address(this), vaultId);\\n        (uint256 excessCollateral, bool isValidVault) = calculator.getExcessCollateral(vault, typeVault);\\n\\n        actions[0] = IController.ActionArgs(\\n          IController.ActionType.WithdrawCollateral,\\n          address(this), // vault owner\\n          address(this), // mint to this address\\n          collateralAsset, // otoken\\n          vaultId, // vaultId\\n          excessCollateral, // amount\\n          0, // index\\n          \\\"\\\" // data\\n        );\\n\\n        controller.operate(actions);\\n\\n        return (collateralDeposited - excessCollateral);\\n    }\\n\\n    /**\\n     * @notice Close the existing short otoken position. Currently this implementation is simple.\\n     * It closes the most recent vault opened by the contract. This assumes that the contract will\\n     * only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by\\n     calling SettleVault action, this assumption should hold.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param spreadToken Token which holds other vault of the strategy\\n     * @return amount of collateral redeemed from the vault\\n     */\\n    function settleShort(address gammaController, address spreadToken) external returns (uint256) {\\n        IController controller = IController(gammaController);\\n\\n        // gets the currently active vault ID\\n        uint256 vaultID = controller.getAccountVaultCounter(address(this));\\n\\n        GammaTypes.Vault memory vault =\\n            controller.getVault(address(this), vaultID);\\n\\n        require(vault.shortOtokens.length > 0, \\\"No short\\\");\\n\\n        // An otoken's collateralAsset is the vault's `asset`\\n        // So in the context of performing Opyn short operations we call them collateralAsset\\n        IERC20 collateralToken = IERC20(vault.collateralAssets[0]);\\n\\n        // The short position has been previously closed, or all the otokens have been burned.\\n        // So we return early.\\n        if (address(collateralToken) == address(0)) {\\n            return 0;\\n        }\\n\\n        // This is equivalent to doing IERC20(vault.asset).balanceOf(address(this))\\n        uint256 startCollateralBalance =\\n            collateralToken.balanceOf(address(this));\\n\\n        // If it is after expiry, we need to settle the short position using the normal way\\n        // Delete the vault and withdraw all remaining collateral from the vault\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](1);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.SettleVault,\\n            address(this), // owner\\n            address(this), // address to transfer to\\n            address(0), // not used\\n            vaultID, // vaultId\\n            0, // not used\\n            0, // not used\\n            \\\"\\\" // not used\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endCollateralBalance = collateralToken.balanceOf(address(this));\\n\\n        ISpreadToken(spreadToken).settleVault();\\n\\n        return endCollateralBalance - startCollateralBalance;\\n    }\\n\\n    /**\\n     * @notice Exercises the ITM option using existing long otoken position. Currently this implementation is simple.\\n     * It calls the `Redeem` action to claim the payout.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param oldOption is the address of the old option\\n     * @param asset is the address of the vault's asset\\n     * @return amount of asset received by exercising the option\\n     */\\n    function settleLong(\\n        address gammaController,\\n        address oldOption,\\n        address asset\\n    ) external returns (uint256) {\\n        IController controller = IController(gammaController);\\n\\n        uint256 oldOptionBalance = IERC20(oldOption).balanceOf(address(this));\\n\\n        if (controller.getPayout(oldOption, oldOptionBalance) == 0) {\\n            return 0;\\n        }\\n\\n        uint256 startAssetBalance = IERC20(asset).balanceOf(address(this));\\n\\n        // If it is after expiry, we need to redeem the profits\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](1);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.Redeem,\\n            address(0), // not used\\n            address(this), // address to send profits to\\n            oldOption, // address of otoken\\n            0, // not used\\n            oldOptionBalance, // otoken balance\\n            0, // not used\\n            \\\"\\\" // not used\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endAssetBalance = IERC20(asset).balanceOf(address(this));\\n\\n        return endAssetBalance - startAssetBalance;\\n    }\\n\\n    /**\\n     * @notice Burn the remaining oTokens left over from auction. Currently this implementation is simple.\\n     * It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will\\n     * only have a single vault open at any given time.\\n     * @param gammaController is the address of the opyn controller contract\\n     * @param currentSpread is the address of the current option\\n     * @return amount of collateral redeemed by burning otokens\\n     */\\n    function burnOtokens(address gammaController, address currentSpread)\\n        external\\n        returns (uint256)\\n    {\\n        uint256 numOTokensToBurn =\\n            IERC20(currentSpread).balanceOf(address(this));\\n\\n        require(numOTokensToBurn > 0, \\\"No oTokens to burn\\\");\\n\\n        IController controller = IController(gammaController);\\n\\n        // gets the currently active vault ID\\n        uint256 vaultID = controller.getAccountVaultCounter(address(this));\\n\\n        GammaTypes.Vault memory vault =\\n            controller.getVault(address(this), vaultID);\\n\\n        require(vault.shortOtokens.length > 0, \\\"No short\\\");\\n\\n        IERC20 collateralToken = IERC20(vault.collateralAssets[0]);\\n\\n        uint256 startCollateralBalance =\\n            collateralToken.balanceOf(address(this));\\n\\n        // Burning `amount` of oTokens from the ribbon vault,\\n        // then withdrawing the corresponding collateral amount from the vault\\n        IController.ActionArgs[] memory actions =\\n            new IController.ActionArgs[](2);\\n\\n        actions[0] = IController.ActionArgs(\\n            IController.ActionType.BurnShortOption,\\n            address(this), // owner\\n            address(this), // address to transfer from\\n            address(vault.shortOtokens[0]), // otoken address\\n            vaultID, // vaultId\\n            numOTokensToBurn, // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        actions[1] = IController.ActionArgs(\\n            IController.ActionType.WithdrawCollateral,\\n            address(this), // owner\\n            address(this), // address to transfer to\\n            address(collateralToken), // withdrawn asset\\n            vaultID, // vaultId\\n            vault.collateralAmounts[0] * (numOTokensToBurn) / (\\n                vault.shortAmounts[0]\\n            ), // amount\\n            0, //index\\n            \\\"\\\" //data\\n        );\\n\\n        controller.operate(actions);\\n\\n        uint256 endCollateralBalance = collateralToken.balanceOf(address(this));\\n\\n        return endCollateralBalance - startCollateralBalance;\\n    }\\n\\n    /**\\n     * @notice Calculates the performance and management fee for this week's round\\n     * @param currentBalance is the balance of funds held on the vault after closing short\\n     * @param lastLockedAmount is the amount of funds locked from the previous round\\n     * @param pendingAmount is the pending deposit amount\\n     * @param performanceFeePercent is the performance fee pct.\\n     * @param managementFeePercent is the management fee pct.\\n     * @return performanceFeeInAsset is the performance fee\\n     * @return managementFeeInAsset is the management fee\\n     * @return vaultFee is the total fees\\n     */\\n    function getVaultFees(\\n        uint256 currentBalance,\\n        uint256 lastLockedAmount,\\n        uint256 pendingAmount,\\n        uint256 performanceFeePercent,\\n        uint256 managementFeePercent\\n    )\\n        internal\\n        pure\\n        returns (\\n            uint256 performanceFeeInAsset,\\n            uint256 managementFeeInAsset,\\n            uint256 vaultFee\\n        )\\n    {\\n        // At the first round, currentBalance=0, pendingAmount>0\\n        // so we just do not charge anything on the first round\\n        uint256 lockedBalanceSansPending =\\n            currentBalance > pendingAmount\\n                ? currentBalance - pendingAmount\\n                : 0;\\n\\n        uint256 _performanceFeeInAsset;\\n        uint256 _managementFeeInAsset;\\n        uint256 _vaultFee;\\n\\n        // Take performance fee and management fee ONLY if difference between\\n        // last week and this week's vault deposits, taking into account pending\\n        // deposits and withdrawals, is positive. If it is negative, last week's\\n        // option expired ITM past breakeven, and the vault took a loss so we\\n        // do not collect performance fee for last week\\n        if (lockedBalanceSansPending > lastLockedAmount) {\\n            _performanceFeeInAsset = performanceFeePercent > 0\\n                ? lockedBalanceSansPending\\n                    - (lastLockedAmount)\\n                    * (performanceFeePercent)\\n                    / (100 * Vault.FEE_MULTIPLIER)\\n                : 0;\\n            _managementFeeInAsset = managementFeePercent > 0\\n                ? lockedBalanceSansPending * (managementFeePercent) / (\\n                    100 * Vault.FEE_MULTIPLIER\\n                )\\n                : 0;\\n\\n            _vaultFee = _performanceFeeInAsset + _managementFeeInAsset;\\n        }\\n\\n        return (_performanceFeeInAsset, _managementFeeInAsset, _vaultFee);\\n    }\\n\\n    /**\\n     * @notice Either retrieves the option tokens if they already exists, or deploys them\\n     * @param closeParams is the struct with details on previous option and strike selection details\\n     * @param vaultParams is the struct with vault general data\\n     * @param underlying is the address of the underlying asset of the option\\n     * @param collateralAsset is the address of the collateral asset of the option\\n     * @param strikePrices strike prices of the options to be minted\\n     * @param expiry is the expiry timestamp of the option\\n     * @param isPut is whether the option is a put\\n     * @return spread address of the option\\n     */\\n    function getOrDeployOtokens(\\n        CloseParams calldata closeParams,\\n        Vault.VaultParams storage vaultParams,\\n        address underlying,\\n        address collateralAsset,\\n        uint256[] memory strikePrices,\\n        uint256 expiry,\\n        bool isPut\\n    ) internal returns (address[] memory) {\\n        IOtokenFactory factory = IOtokenFactory(closeParams.OTOKEN_FACTORY);\\n        address[] memory spread = new address[](strikePrices.length);\\n\\n        for (uint8 i = 0; i < strikePrices.length; i++) {\\n            spread[i] = getOrDeployOToken(\\n                closeParams.OTOKEN_FACTORY,\\n                underlying,\\n                closeParams.USDC,\\n                collateralAsset,\\n                strikePrices[i],\\n                expiry,\\n                isPut\\n            );\\n            verifyOtoken(\\n                spread[i],\\n                vaultParams,\\n                collateralAsset,\\n                closeParams.USDC,\\n                closeParams.delay\\n            );\\n\\n        }\\n        return spread;\\n    }\\n\\n    function getOrDeployOToken(\\n        address _factory,\\n        address _underlyingAsset,\\n        address _strikeAsset,\\n        address _collateralAsset,\\n        uint256 _strikePrice,\\n        uint256 _expiry,\\n        bool _isPut\\n\\n    ) private returns (address) {\\n        IOtokenFactory factory = IOtokenFactory(_factory);\\n\\n        address otokenFromFactory =\\n            factory.getOtoken(\\n                _underlyingAsset,\\n                _strikeAsset,\\n                _collateralAsset,\\n                _strikePrice,\\n                _expiry,\\n                _isPut\\n            );\\n\\n        if (otokenFromFactory != address(0)) {\\n            return otokenFromFactory;\\n        }\\n\\n        address otoken =\\n            factory.createOtoken(\\n                _underlyingAsset,\\n                _strikeAsset,\\n                _collateralAsset,\\n                _strikePrice,\\n                _expiry,\\n                _isPut\\n            );\\n\\n        return otoken;\\n    }\\n\\n    /**\\n     * @notice Starts the gnosis auction\\n     * @param auctionDetails is the struct with all the custom parameters of the auction\\n     * @return the auction id of the newly created auction\\n     */\\n    function startAuction(GnosisAuction.AuctionDetails calldata auctionDetails)\\n        external\\n        returns (uint256)\\n    {\\n        return GnosisAuction.startAuction(auctionDetails);\\n    }\\n\\n    /**\\n     * @notice Settles the gnosis auction\\n     * @param gnosisEasyAuction is the contract address of Gnosis easy auction protocol\\n     * @param auctionID is the auction ID of the gnosis easy auction\\n     */\\n    function settleAuction(address gnosisEasyAuction, uint256 auctionID)\\n        internal\\n    {\\n        IGnosisAuction(gnosisEasyAuction).settleAuction(auctionID);\\n    }\\n\\n    /**\\n     * @notice Places a bid in an auction\\n     * @param bidDetails is the struct with all the details of the\\n      bid including the auction's id and how much to bid\\n     */\\n    function placeBid(GnosisAuction.BidDetails calldata bidDetails)\\n        external\\n        returns (\\n            uint256 sellAmount,\\n            uint256 buyAmount,\\n            uint64 userId\\n        )\\n    {\\n        return GnosisAuction.placeBid(bidDetails);\\n    }\\n\\n    /**\\n     * @notice Claims the oTokens belonging to the vault\\n     * @param auctionSellOrder is the sell order of the bid\\n     * @param gnosisEasyAuction is the address of the gnosis auction contract\\n     holding custody to the funds\\n     * @param counterpartyThetaVault is the address of the counterparty theta\\n     vault of this delta vault\\n     */\\n    function claimAuctionOtokens(\\n        Vault.AuctionSellOrder calldata auctionSellOrder,\\n        address gnosisEasyAuction,\\n        address counterpartyThetaVault\\n    ) external {\\n        GnosisAuction.claimAuctionOtokens(\\n            auctionSellOrder,\\n            gnosisEasyAuction,\\n            counterpartyThetaVault\\n        );\\n    }\\n\\n    /**\\n     * @notice Gets the settlement price of a settled auction\\n     * @param gnosisEasyAuction The address of the Gnosis Easy Auction contract\\n     * @return settlementPrice Auction settlement price\\n     */\\n    function getAuctionSettlementPrice(\\n        address gnosisEasyAuction,\\n        uint256 optionAuctionID\\n    ) public view returns (uint256) {\\n        bytes32 clearingPriceOrder =\\n            IGnosisAuction(gnosisEasyAuction)\\n                .auctionData(optionAuctionID)\\n                .clearingPriceOrder;\\n\\n        if (clearingPriceOrder == bytes32(0)) {\\n            // Current auction hasn't settled yet\\n            return 0;\\n        } else {\\n            // We decode the clearingPriceOrder to find the auction settlement price\\n            // settlementPrice = clearingPriceOrder.sellAmount / clearingPriceOrder.buyAmount\\n            return\\n                (10**Vault.OTOKEN_DECIMALS)\\n                    * (\\n                    uint96(uint256(clearingPriceOrder)) // sellAmount\\n                )\\n                    / (\\n                    uint96(uint256(clearingPriceOrder) >> 96) // buyAmount\\n                );\\n        }\\n    }\\n\\n    /**\\n     * @notice Verify the constructor params satisfy requirements\\n     * @param owner is the owner of the vault with critical permissions\\n     * @param feeRecipient is the address to recieve vault performance and management fees\\n     * @param performanceFee is the perfomance fee pct.\\n     * @param tokenName is the name of the token\\n     * @param tokenSymbol is the symbol of the token\\n     * @param _vaultParams is the struct with vault general data\\n     */\\n    function verifyInitializerParams(\\n        address owner,\\n        address keeper,\\n        address feeRecipient,\\n        uint256 performanceFee,\\n        uint256 managementFee,\\n        string calldata tokenName,\\n        string calldata tokenSymbol,\\n        Vault.VaultParams calldata _vaultParams\\n    ) external pure {\\n        require(owner != address(0), \\\"!owner\\\");\\n        require(keeper != address(0), \\\"!keeper\\\");\\n        require(feeRecipient != address(0), \\\"!feeRecipient\\\");\\n        require(\\n            performanceFee < 100 * Vault.FEE_MULTIPLIER,\\n            \\\"performanceFee >= 100%\\\"\\n        );\\n        require(\\n            managementFee < 100 * Vault.FEE_MULTIPLIER,\\n            \\\"managementFee >= 100%\\\"\\n        );\\n        require(bytes(tokenName).length > 0, \\\"!tokenName\\\");\\n        require(bytes(tokenSymbol).length > 0, \\\"!tokenSymbol\\\");\\n\\n        require(_vaultParams.asset != address(0), \\\"!asset\\\");\\n        require(_vaultParams.underlying != address(0), \\\"!underlying\\\");\\n        require(_vaultParams.minimumSupply > 0, \\\"!minimumSupply\\\");\\n        require(_vaultParams.cap > 0, \\\"!cap\\\");\\n        require(\\n            _vaultParams.cap > _vaultParams.minimumSupply,\\n            \\\"cap has to be higher than minimumSupply\\\"\\n        );\\n    }\\n\\n    /**\\n     * @notice Gets the next option expiry timestamp\\n     * @param currentSpread is the otoken address that the vault is currently writing\\n     */\\n    function getNextExpiry(address currentSpread)\\n        internal\\n        view\\n        returns (uint256)\\n    {\\n        // uninitialized state\\n        if (currentSpread == address(0)) {\\n            return getNextFriday(block.timestamp);\\n        }\\n        uint256 currentExpiry = IOtoken(currentSpread).expiryTimestamp();\\n\\n        // After options expiry if no options are written for >1 week\\n        // We need to give the ability continue writing options\\n        if (block.timestamp > currentExpiry + 7 days) {\\n            return getNextFriday(block.timestamp);\\n        }\\n        return getNextFriday(currentExpiry);\\n    }\\n\\n    /**\\n     * @notice Gets the next options expiry timestamp\\n     * @param timestamp is the expiry timestamp of the current option\\n     * Reference: https://codereview.stackexchange.com/a/33532\\n     * Examples:\\n     * getNextFriday(week 1 thursday) -> week 1 friday\\n     * getNextFriday(week 1 friday) -> week 2 friday\\n     * getNextFriday(week 1 saturday) -> week 2 friday\\n     */\\n    function getNextFriday(uint256 timestamp) internal pure returns (uint256) {\\n        // dayOfWeek = 0 (sunday) - 6 (saturday)\\n        uint256 dayOfWeek = ((timestamp / 1 days) + 4) % 7;\\n        uint256 nextFriday = timestamp + ((7 + 5 - dayOfWeek) % 7) * 1 days;\\n        uint256 friday8am = nextFriday - (nextFriday % (24 hours)) + (8 hours);\\n\\n        // If the passed timestamp is day=Friday hour>8am, we simply increment it by a week to next Friday\\n        if (timestamp >= friday8am) {\\n            friday8am += 7 days;\\n        }\\n        return friday8am;\\n    }\\n}\",\"keccak256\":\"0x6c27562619111dd798ba12f463a9abd5b2e8a519eb887ccf5677e91b9dbbd4f0\",\"license\":\"MIT\"},\"contracts/vendor/DSMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\n/// math.sol -- mixin for inline numerical wizardry\\n\\n// This program is free software: you can redistribute it and/or modify\\n// it under the terms of the GNU General Public License as published by\\n// the Free Software Foundation, either version 3 of the License, or\\n// (at your option) any later version.\\n\\n// This program is distributed in the hope that it will be useful,\\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n// GNU General Public License for more details.\\n\\n// You should have received a copy of the GNU General Public License\\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\\n\\npragma solidity >0.4.13;\\n\\nlibrary DSMath {\\n    function add(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require((z = x + y) >= x, \\\"ds-math-add-overflow\\\");\\n    }\\n\\n    function sub(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require((z = x - y) <= x, \\\"ds-math-sub-underflow\\\");\\n    }\\n\\n    function mul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        require(y == 0 || (z = x * y) / y == x, \\\"ds-math-mul-overflow\\\");\\n    }\\n\\n    function min(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        return x <= y ? x : y;\\n    }\\n\\n    function max(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        return x >= y ? x : y;\\n    }\\n\\n    function imin(int256 x, int256 y) internal pure returns (int256 z) {\\n        return x <= y ? x : y;\\n    }\\n\\n    function imax(int256 x, int256 y) internal pure returns (int256 z) {\\n        return x >= y ? x : y;\\n    }\\n\\n    uint256 constant WAD = 10**18;\\n    uint256 constant RAY = 10**27;\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function wmul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, y), WAD / 2) / WAD;\\n    }\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function rmul(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, y), RAY / 2) / RAY;\\n    }\\n\\n    //rounds to zero if x*y < WAD / 2\\n    function wdiv(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, WAD), y / 2) / y;\\n    }\\n\\n    //rounds to zero if x*y < RAY / 2\\n    function rdiv(uint256 x, uint256 y) internal pure returns (uint256 z) {\\n        z = add(mul(x, RAY), y / 2) / y;\\n    }\\n\\n    // This famous algorithm is called \\\"exponentiation by squaring\\\"\\n    // and calculates x^n with x as fixed-point and n as regular unsigned.\\n    //\\n    // It's O(log n), instead of O(n) for naive repeated multiplication.\\n    //\\n    // These facts are why it works:\\n    //\\n    //  If n is even, then x^n = (x^2)^(n/2).\\n    //  If n is odd,  then x^n = x * x^(n-1),\\n    //   and applying the equation for even x gives\\n    //    x^n = x * (x^2)^((n-1) / 2).\\n    //\\n    //  Also, EVM division is flooring and\\n    //    floor[(n-1) / 2] = floor[n / 2].\\n    //\\n    function rpow(uint256 x, uint256 n) internal pure returns (uint256 z) {\\n        z = n % 2 != 0 ? x : RAY;\\n\\n        for (n /= 2; n != 0; n /= 2) {\\n            x = rmul(x, x);\\n\\n            if (n % 2 != 0) {\\n                z = rmul(z, x);\\n            }\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xe1c6bb5cff7c83c85792349f61b3f4faf6e22bb02fa95d7af7b269e59a3902b2\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x614b7561003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100a35760003560e01c806307cc4239146100a8578063087aebc4146100ca57806324cb92d8146101045780632e5fdf281461013257806358ffbb3d1461014557806368bb40301461016557806395a170d714610195578063c72733f7146101d9578063c8128b65146101ec578063de8e34181461022c578063eebc5ff41461024c575b600080fd5b8180156100b457600080fd5b506100c86100c3366004613a2f565b61026c565b005b8180156100d657600080fd5b506100ea6100e5366004613a80565b61027c565b604080519283526020830191909152015b60405180910390f35b81801561011057600080fd5b5061012461011f366004613b33565b610840565b6040519081526020016100fb565b610124610140366004613b6c565b610c0f565b81801561015157600080fd5b50610124610160366004613b33565b610cce565b81801561017157600080fd5b50610185610180366004613bb0565b6111ad565b6040516100fb9493929190613c45565b8180156101a157600080fd5b506101b56101b0366004613cca565b6113ee565b6040805193845260208401929092526001600160401b0316908201526060016100fb565b6100c86101e7366004613d25565b611409565b6101ff6101fa366004613df1565b6117d9565b604080519687526020870195909552938501929092526060840152608083015260a082015260c0016100fb565b81801561023857600080fd5b50610124610247366004613e1f565b6118f5565b81801561025857600080fd5b50610124610267366004613e5f565b611c06565b610277838383611c11565b505050565b604051636553690d60e11b81526000908190889082906001600160a01b0383169063caa6d21a906102b1903090600401613e71565b602060405180830381865afa1580156102ce573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102f29190613e85565b6102fd906001613eb4565b905060008888600081811061031457610314613ec7565b90506020020160208101906103299190613edd565b90506000816001600160a01b031663aabaecd66040518163ffffffff1660e01b8152600401602060405180830381865afa15801561036b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061038f9190613efa565b90506000816001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156103d1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103f59190613f17565b60ff169050826001600160a01b031663f3c274a66040518163ffffffff1660e01b8152600401602060405180830381865afa158015610438573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061045c9190613f4a565b1561051c5761046c81600a613eb4565b61047790600a614049565b836001600160a01b031663c52987cf6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104b5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d99190613e85565b6104e39190614055565b6104ef6008600a614049565b6104f9908b614055565b61050b90670de0b6b3a7640000614055565b6105159190614082565b9650610559565b8896506008811115610559576000610535600883614096565b61054090600a614049565b90508088111561055757610554818b614082565b97505b505b508061056f6001600160a01b0382168d8b611d68565b60408051600380825260808201909252600091816020015b61058f6139ab565b815260200190600190039081610587579050506040805161010081019091529091508060008152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b031681526020018681526020016000815260200160008152602001604051806020016040528060008152508152508160008151811061062157610621613ec7565b60209081029190910101526040805161010081019091528060058152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b031681526020018681526020018b81526020016000815260200160405180602001604052806000815250815250816001815181106106a6576106a6613ec7565b60209081029190910101526040805161010081019091528060018152306020820181905260408201526060018d8d6000816106e3576106e3613ec7565b90506020020160208101906106f89190613edd565b6001600160a01b0316815260200186815260200189815260200160008152602001604051806020016040528060008152508152508160028151811061073f5761073f613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c69061077690849060040161410f565b600060405180830381600087803b15801561079057600080fd5b505af11580156107a4573d6000803e3d6000fd5b5050505050506107ec8c8c8c8c808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152508c92508d9150611da49050565b61082f8c8c838b878f8f808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152508f9250611fc4915050565b945050505050965096945050505050565b604051636553690d60e11b8152600090839082906001600160a01b0383169063caa6d21a90610873903090600401613e71565b602060405180830381865afa158015610890573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108b49190613e85565b90506000826001600160a01b031663d99d13f530846040518363ffffffff1660e01b81526004016108e69291906141fc565b600060405180830381865afa158015610903573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261092b9190810190614485565b8051519091506109565760405162461bcd60e51b815260040161094d906144b9565b60405180910390fd5b6000816040015160008151811061096f5761096f613ec7565b6020026020010151905060006001600160a01b0316816001600160a01b0316036109a0576000945050505050610c09565b6040516370a0823160e01b81526000906001600160a01b038316906370a08231906109cf903090600401613e71565b602060405180830381865afa1580156109ec573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a109190613e85565b60408051600180825281830190925291925060009190816020015b610a336139ab565b815260200190600190039081610a2b579050506040805161010081019091529091508060078152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b0316815260200186815260200160008152602001600081526020016040518060200160405280600081525081525081600081518110610ac557610ac5613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690610afc90849060040161410f565b600060405180830381600087803b158015610b1657600080fd5b505af1158015610b2a573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03861691506370a0823190610b5d903090600401613e71565b602060405180830381865afa158015610b7a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b9e9190613e85565b9050886001600160a01b0316631513e9b96040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610bdb57600080fd5b505af1158015610bef573d6000803e3d6000fd5b505050508281610bff9190614096565b9750505050505050505b92915050565b604051632afe316960e11b81526004810182905260009081906001600160a01b038516906355fc62d2906024016101c060405180830381865afa158015610c5a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c7e9190614506565b6101000151905080610c94576000915050610c09565b6001600160601b03606082901c8116908216610cb26008600a614049565b610cbc9190614055565b610cc69190614082565b915050610c09565b600080826001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610cfd9190613e71565b602060405180830381865afa158015610d1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3e9190613e85565b905060008111610d855760405162461bcd60e51b815260206004820152601260248201527127379037aa37b5b2b739903a3790313ab93760711b604482015260640161094d565b604051636553690d60e11b815284906000906001600160a01b0383169063caa6d21a90610db6903090600401613e71565b602060405180830381865afa158015610dd3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610df79190613e85565b90506000826001600160a01b031663d99d13f530846040518363ffffffff1660e01b8152600401610e299291906141fc565b600060405180830381865afa158015610e46573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610e6e9190810190614485565b805151909150610e905760405162461bcd60e51b815260040161094d906144b9565b60008160400151600081518110610ea957610ea9613ec7565b602002602001015190506000816001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610ee19190613e71565b602060405180830381865afa158015610efe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f229190613e85565b6040805160028082526060820190925291925060009190816020015b610f466139ab565b815260200190600190039081610f3e5790505060408051610100810190915290915080600281523060208201819052604082015285518051606090920191600090610f9357610f93613ec7565b60200260200101516001600160a01b03168152602001868152602001888152602001600081526020016040518060200160405280600081525081525081600081518110610fe257610fe2613ec7565b60209081029190910101526040805161010081019091528060068152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b03168152602001868152602001856060015160008151811061104b5761104b613ec7565b6020026020010151898760a0015160008151811061106b5761106b613ec7565b602002602001015161107d9190614055565b6110879190614082565b81526020016000815260200160405180602001604052806000815250815250816001815181106110b9576110b9613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c6906110f090849060040161410f565b600060405180830381600087803b15801561110a57600080fd5b505af115801561111e573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03861691506370a0823190611151903090600401613e71565b602060405180830381865afa15801561116e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111929190613e85565b905061119e8382614096565b9b9a5050505050505050505050565b6060808060008061120b816111c560408b018b6145da565b9050116111d3576000612395565b6111e060408a018a6145da565b60008181106111f1576111f1613ec7565b90506020020160208101906112069190613edd565b612395565b9050600061121f60a08a0160808b01613edd565b885460018a01546040516301893c2160e51b81526004810186905260ff831680151560248301529394506001600160a01b039182169263010000009004821691851690633127842090604401600060405180830381865afa158015611288573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526112b09190810190614623565b80518251929a50909850146112f65760405162461bcd60e51b815260206004820152600c60248201526b496e76616c6964204461746160a01b604482015260640161094d565b60005b885181101561136c5788818151811061131457611314613ec7565b602002602001015160000361135a5760405162461bcd60e51b815260206004820152600c60248201526b21737472696b65507269636560a01b604482015260640161094d565b8061136481614686565b9150506112f9565b5061137c8c8c84848c8a8961243a565b98506113de61139160e08e0160c08f01613edd565b6040518060400160405280601181526020017021b0b6361029b83932b0b2102a37b5b2b760791b8152506040518060400160405280600381526020016210d4d560ea1b8152508486612580565b9550505050505093509350935093565b60008060006113fc84612607565b9250925092509193909250565b6001600160a01b038a166114485760405162461bcd60e51b815260206004820152600660248201526510b7bbb732b960d11b604482015260640161094d565b6001600160a01b0389166114885760405162461bcd60e51b815260206004820152600760248201526610b5b2b2b832b960c91b604482015260640161094d565b6001600160a01b0388166114ce5760405162461bcd60e51b815260206004820152600d60248201526c08599959549958da5c1a595b9d609a1b604482015260640161094d565b6114dc620f42406064614055565b87106115235760405162461bcd60e51b8152602060048201526016602482015275706572666f726d616e6365466565203e3d203130302560501b604482015260640161094d565b611531620f42406064614055565b86106115775760405162461bcd60e51b81526020600482015260156024820152746d616e6167656d656e74466565203e3d203130302560581b604482015260640161094d565b836115b15760405162461bcd60e51b815260206004820152600a60248201526921746f6b656e4e616d6560b01b604482015260640161094d565b816115ed5760405162461bcd60e51b815260206004820152600c60248201526b085d1bdad95b94de5b589bdb60a21b604482015260640161094d565b60006115ff6080830160608401613edd565b6001600160a01b03160361163e5760405162461bcd60e51b815260206004820152600660248201526508585cdcd95d60d21b604482015260640161094d565b600061165060a0830160808401613edd565b6001600160a01b0316036116945760405162461bcd60e51b815260206004820152600b60248201526a21756e6465726c79696e6760a81b604482015260640161094d565b60006116a660c0830160a0840161469f565b66ffffffffffffff16116116ed5760405162461bcd60e51b815260206004820152600e60248201526d216d696e696d756d537570706c7960901b604482015260640161094d565b60006116ff60e0830160c084016146c8565b6001600160681b03161161173e5760405162461bcd60e51b815260040161094d906020808252600490820152630216361760e41b604082015260600190565b61174e60c0820160a0830161469f565b66ffffffffffffff1661176760e0830160c084016146c8565b6001600160681b0316116117cd5760405162461bcd60e51b815260206004820152602760248201527f6361702068617320746f20626520686967686572207468616e206d696e696d756044820152666d537570706c7960c81b606482015260840161094d565b50505050505050505050565b60018201546002830154600091829182918291829182916020890135916001600160801b03600160681b909104811691168361181960608c013585614096565b9050611870818d600001600f9054906101000a90046001600160681b03166001600160681b03168e600101600d9054906101000a90046001600160801b03166001600160801b03168e608001358f60a00135612981565b91975090955061188290508585614096565b93506118ab6118958360408e0135614096565b6118a360608e013587614096565b858e35612a3d565b97506118bd60c08c0135898d35612a85565b6118cb9060608d0135613eb4565b98506118d983898d35612abf565b96506118e58985614096565b9950505050509295509295509295565b6040516370a0823160e01b8152600090849082906001600160a01b038616906370a0823190611928903090600401613e71565b602060405180830381865afa158015611945573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119699190613e85565b60405163565eea1960e01b81529091506001600160a01b0383169063565eea199061199a90889085906004016141fc565b602060405180830381865afa1580156119b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119db9190613e85565b6000036119ed57600092505050611bff565b6040516370a0823160e01b81526000906001600160a01b038616906370a0823190611a1c903090600401613e71565b602060405180830381865afa158015611a39573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a5d9190613e85565b60408051600180825281830190925291925060009190816020015b611a806139ab565b815260200190600190039081611a7857905050604080516101008101909152909150806008815260200160006001600160a01b03168152602001306001600160a01b03168152602001886001600160a01b0316815260200160008152602001848152602001600081526020016040518060200160405280600081525081525081600081518110611b1257611b12613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c690611b4990849060040161410f565b600060405180830381600087803b158015611b6357600080fd5b505af1158015611b77573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03891691506370a0823190611baa903090600401613e71565b602060405180830381865afa158015611bc7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611beb9190613e85565b9050611bf78382614096565b955050505050505b9392505050565b6000610c0982612afa565b6000611c48611c266060860160408701614706565b611c366040870160208801614723565b611c436020880188614723565b612e29565b60408051600180825281830190925291925060009190602080830190803683370190505090508181600081518110611c8257611c82613ec7565b602002602001018181525050836001600160a01b0316637882deaf846001600160a01b031663432833a66040518163ffffffff1660e01b8152600401602060405180830381865afa158015611cdb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611cff9190613e85565b836040518363ffffffff1660e01b8152600401611d1d929190614740565b60408051808303816000875af1158015611d3b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d5f9190614759565b50505050505050565b73dac17f958d2ee523a2206206994597c13d831ec6196001600160a01b03841601611d9957611d9983836000612e67565b610277838383612e67565b6000859050600084600081518110611dbe57611dbe613ec7565b60200260200101519050611de68685836001600160a01b0316611d689092919063ffffffff16565b60408051600280825260608201909252600091816020015b611e066139ab565b815260200190600190039081611dfe579050506040805161010081019091529091508060038152602001856001600160a01b03168152602001306001600160a01b0316815260200187600081518110611e6157611e61613ec7565b60200260200101516001600160a01b0316815260200160018152602001868152602001600081526020016040518060200160405280600081525081525081600081518110611eb157611eb1613ec7565b60209081029190910101526040805161010081019091528060018152602001856001600160a01b03168152602001306001600160a01b0316815260200187600181518110611f0157611f01613ec7565b60200260200101516001600160a01b0316815260200160018152602001868152602001600081526020016040518060200160405280600081525081525081600181518110611f5157611f51613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0384169063b617f0c690611f8890849060040161410f565b600060405180830381600087803b158015611fa257600080fd5b505af1158015611fb6573d6000803e3d6000fd5b505050505050505050505050565b6000808890506000816001600160a01b031663ce3e39c06040518163ffffffff1660e01b8152600401602060405180830381865afa15801561200a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061202e9190613efa565b905060008560018151811061204557612045613ec7565b6020026020010151905061206d8a86836001600160a01b0316611d689092919063ffffffff16565b604080516001808252818301909252600091816020015b61208c6139ab565b815260200190600190039081612084579050506040805161010081019091529091508060038152602001306001600160a01b03168152602001306001600160a01b03168152602001886001815181106120e7576120e7613ec7565b60200260200101516001600160a01b0316815260200189815260200187815260200160008152602001604051806020016040528060008152508152508160008151811061213657612136613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c69061216d90849060040161410f565b600060405180830381600087803b15801561218757600080fd5b505af115801561219b573d6000803e3d6000fd5b50505050600080856001600160a01b0316639daafbe8308c6040518363ffffffff1660e01b81526004016121d09291906141fc565b600060405180830381865afa1580156121ed573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052612215919081019061477d565b5091509150600080866001600160a01b031663cd43fbfb85856040518363ffffffff1660e01b815260040161224b929190614805565b6040805180830381865afa158015612267573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061228b91906148c6565b60408051610100810190915291935091508060068152602001306001600160a01b03168152602001306001600160a01b031681526020018f6001600160a01b031681526020018d815260200183815260200160008152602001604051806020016040528060008152508152508560008151811061230a5761230a613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0389169063b617f0c69061234190889060040161410f565b600060405180830381600087803b15801561235b57600080fd5b505af115801561236f573d6000803e3d6000fd5b50505050818d61237f9190614096565b985050505050505050505b979650505050505050565b60006001600160a01b0382166123ae57610c0942612fa2565b6000826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156123ee573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124129190613e85565b90506124218162093a80613eb4565b42111561243157611bff42612fa2565b611bff81612fa2565b6060600061244b60208a018a613edd565b9050600085516001600160401b03811115612468576124686140a9565b604051908082528060200260200182016040528015612491578160200160208202803683370190505b50905060005b86518160ff161015612572576124ec6124b360208d018d613edd565b8a8d60200160208101906124c79190613edd565b8b8b8660ff16815181106124dd576124dd613ec7565b60200260200101518b8b613041565b828260ff168151811061250157612501613ec7565b60200260200101906001600160a01b031690816001600160a01b031681525050612560828260ff168151811061253957612539613ec7565b60200260200101518b8a8e60200160208101906125569190613edd565b8f60600135613155565b8061256a816148e9565b915050612497565b509998505050505050505050565b600080612595876001600160a01b0316613536565b604051630381fe1560e21b81529091506001600160a01b03821690630e07f854906125ca908990899089908990600401614908565b600060405180830381600087803b1580156125e457600080fd5b505af11580156125f8573d6000803e3d6000fd5b50929998505050505050505050565b60008080612616606480614055565b61262860c086013560a0870135614055565b6126329190614082565b92506126436060850135600a614049565b60e085013561265760086060880135613eb4565b61266290600a614049565b61266c9086614055565b6126769190614082565b6126809190614082565b91506001600160601b038311156126e55760405162461bcd60e51b8152602060048201526024808201527f73656c6c416d6f756e74203e20747970652875696e74393629206d61782076616044820152636c75652160e01b606482015260840161094d565b6001600160601b038211156127485760405162461bcd60e51b815260206004820152602360248201527f627579416d6f756e74203e20747970652875696e74393629206d61782076616c60448201526275652160e81b606482015260840161094d565b61277c61275b6040860160208701613edd565b8461276c6060880160408901613edd565b6001600160a01b03169190612e67565b604080516001808252818301909252600091602080830190803683375050604080516001808252818301909252929350600092915060208083019080368337505060408051600180825281830190925292935060009291506020808301908036833701905050905084836000815181106127f8576127f8613ec7565b60200260200101906001600160601b031690816001600160601b031681525050858260008151811061282c5761282c613ec7565b60200260200101906001600160601b031690816001600160601b031681525050600160001b8160008151811061286457612864613ec7565b6020026020010181815250508660200160208101906128839190613edd565b6001600160a01b031663d225269c88608001358585856040518563ffffffff1660e01b81526004016128b8949392919061498b565b6020604051808303816000875af11580156128d7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128fb91906149f2565b935061290f61012088016101008901613edd565b6001600160a01b03166129256020890189613edd565b6040805160808b01358152602081018a90529081018890526001600160a01b0391909116907fa227b5eceb2bd983c0ed9dd34c971be74cd4f386b289d4415602a1fbcf2cb53b9060600160405180910390a35050509193909250565b60008060008086891161299557600061299f565b61299f878a614096565b905060008060008a841115612a2b57600089116129bd5760006129e9565b6129cb620f42406064614055565b6129d58a8d614055565b6129df9190614082565b6129e99085614096565b9250600088116129fa576000612a1c565b612a08620f42406064614055565b612a128986614055565b612a1c9190614082565b9150612a288284613eb4565b90505b919b909a509098509650505050505050565b600080612a4b83600a614049565b905060008611612a5b5780612a79565b612a7986612a73612a6c88886135d0565b84906135dc565b906135e8565b9150505b949350505050565b600060018311612aa75760405162461bcd60e51b815260040161094d90614a0f565b612a7d612ab583600a614049565b612a7386866135dc565b600060018311612ae15760405162461bcd60e51b815260040161094d90614a0f565b612a7d83612a73612af385600a614049565b87906135dc565b600080612b12612b0d6020850185613edd565b6135f4565b905060008111612b595760405162461bcd60e51b8152602060048201526012602482015271139bc81bdd1bdad95b9cc81d1bc81cd95b1b60721b604482015260640161094d565b612bf2612b6c6040850160208601613edd565b612b796020860186613edd565b6001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401612ba49190613e71565b602060405180830381865afa158015612bc1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612be59190613e85565b61276c6020870187613edd565b6000612c10612c06836402540be400614055565b85608001356136d0565b90506012846060013511612c4757612c2d60608501356012614096565b612c3890600a614049565b612c429082614082565b612c6b565b612c5660126060860135614096565b612c6190600a614049565b612c6b9082614055565b90506001600160601b03811115612ce75760405162461bcd60e51b815260206004820152603a60248201527f6f7074696f6e5072656d69756d202a206f546f6b656e53656c6c416d6f756e74604482015279203e20747970652875696e74393629206d61782076616c75652160301b606482015260840161094d565b6000612cf760a086013542613eb4565b9050612d096040860160208701613edd565b6001600160a01b0316630a4cd6c9612d246020880188613edd565b612d346060890160408a01613edd565b60408051602081018252600080825291516001600160e01b031960e087901b168152612d73949392889283928c928c9260019282918291600401614a3e565b6020604051808303816000875af1158015612d92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612db69190613e85565b935033612dc96060870160408801613edd565b6001600160a01b0316612ddf6020880188613edd565b6001600160a01b03167f95ad3b10488285d6307fda297f633faaf2a0d713c08ebe5f49c1b9255b01d29e87604051612e1991815260200190565b60405180910390a4505050919050565b60006001600160601b038216612e5d600160601b600160c01b03606086901b166001600160c01b031960c088901b16613eb4565b612a7d9190613eb4565b801580612ee15750604051636eb1769f60e11b81523060048201526001600160a01b03838116602483015284169063dd62ed3e90604401602060405180830381865afa158015612ebb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612edf9190613e85565b155b612f4c5760405162461bcd60e51b815260206004820152603660248201527f5361666545524332303a20617070726f76652066726f6d206e6f6e2d7a65726f60448201527520746f206e6f6e2d7a65726f20616c6c6f77616e636560501b606482015260840161094d565b6102778363095ea7b360e01b8484604051602401612f6b9291906141fc565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b03199093169290921790915261370a565b6000806007612fb46201518085614082565b612fbf906004613eb4565b612fc99190614ac3565b905060006007612fda83600c614096565b612fe49190614ac3565b612ff19062015180614055565b612ffb9085613eb4565b9050600061300c6201518083614ac3565b6130169083614096565b61302290617080613eb4565b9050808510612a7d5761303862093a8082613eb4565b95945050505050565b6040516304551c1560e21b8152600090889082906001600160a01b0383169063115470549061307e908c908c908c908c908c908c90600401614ad7565b602060405180830381865afa15801561309b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906130bf9190613efa565b90506001600160a01b038116156130d957915061238a9050565b604051630c09746360e41b81526000906001600160a01b0384169063c097463090613112908d908d908d908d908d908d90600401614ad7565b6020604051808303816000875af1158015613131573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061119e9190613efa565b6001600160a01b03851661319c5760405162461bcd60e51b815260206004820152600e60248201526d216f746f6b656e4164647265737360901b604482015260640161094d565b8354604080516379e13a5360e11b81529051879260ff161515916001600160a01b0384169163f3c274a6916004808201926020929091908290030181865afa1580156131ec573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132109190613f4a565b15151461324f5760405162461bcd60e51b815260206004820152600d60248201526c0a8f2e0ca40dad2e6dac2e8c6d609b1b604482015260640161094d565b600185015460408051631c56369f60e21b815290516001600160a01b0392831692841691637158da7c9160048083019260209291908290030181865afa15801561329d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132c19190613efa565b6001600160a01b03161461330f5760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c81d5b99195c9b1e5a5b99d05cdcd95d605a1b604482015260640161094d565b836001600160a01b0316816001600160a01b031663aabaecd66040518163ffffffff1660e01b8152600401602060405180830381865afa158015613357573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061337b9190613efa565b6001600160a01b0316146133c95760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c818dbdb1b185d195c985b105cdcd95d605a1b604482015260640161094d565b826001600160a01b0316816001600160a01b03166317d69bc86040518163ffffffff1660e01b8152600401602060405180830381865afa158015613411573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134359190613efa565b6001600160a01b0316146134815760405162461bcd60e51b8152602060048201526013602482015272737472696b65417373657420213d205553444360681b604482015260640161094d565b600061348d8342613eb4565b905080826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156134ce573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134f29190613e85565b1015611d5f5760405162461bcd60e51b8152602060048201526013602482015272457870697279206265666f72652064656c617960681b604482015260640161094d565b6000763d602d80600a3d3981f3363d3d373d3d3d363d730000008260601b60e81c176000526e5af43d82803e903d91602b57fd5bf38260781b17602052603760096000f090506001600160a01b0381166135cb5760405162461bcd60e51b8152602060048201526016602482015275115490cc4c4d8dce8818dc99585d194819985a5b195960521b604482015260640161094d565b919050565b6000611bff8284614096565b6000611bff8284614055565b6000611bff8284614082565b600080826001600160a01b03166370a08231306040518263ffffffff1660e01b81526004016136239190613e71565b602060405180830381865afa158015613640573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906136649190613e85565b90506001600160601b03811115610c095760405162461bcd60e51b815260206004820152602a60248201527f6f546f6b656e53656c6c416d6f756e74203e20747970652875696e74393629206044820152696d61782076616c75652160b01b606482015260840161094d565b6000670de0b6b3a76400006137006136e885856137dc565b6136fb6002670de0b6b3a7640000614082565b613843565b611bff9190614082565b600061375f826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166138989092919063ffffffff16565b805190915015610277578080602001905181019061377d9190613f4a565b6102775760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161094d565b6000811580613800575082826137f28183614055565b92506137fe9083614082565b145b610c095760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6d756c2d6f766572666c6f7760601b604482015260640161094d565b6000826138508382613eb4565b9150811015610c095760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6164642d6f766572666c6f7760601b604482015260640161094d565b6060612a7d848460008585600080866001600160a01b031685876040516138bf9190614b10565b60006040518083038185875af1925050503d80600081146138fc576040519150601f19603f3d011682016040523d82523d6000602084013e613901565b606091505b509150915061238a878383876060831561397c578251600003613975576001600160a01b0385163b6139755760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161094d565b5081612a7d565b612a7d83838151156139915781518083602001fd5b8060405162461bcd60e51b815260040161094d9190614b2c565b604080516101008101909152806000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001600081526020016000815260200160008152602001606081525090565b6001600160a01b0381168114613a2157600080fd5b50565b80356135cb81613a0c565b600080600083850360a0811215613a4557600080fd5b6060811215613a5357600080fd5b508392506060840135613a6581613a0c565b91506080840135613a7581613a0c565b809150509250925092565b60008060008060008060a08789031215613a9957600080fd5b8635613aa481613a0c565b95506020870135613ab481613a0c565b945060408701356001600160401b0380821115613ad057600080fd5b818901915089601f830112613ae457600080fd5b813581811115613af357600080fd5b8a60208260051b8501011115613b0857600080fd5b60208301965080955050505060608701359150613b2760808801613a24565b90509295509295509295565b60008060408385031215613b4657600080fd5b8235613b5181613a0c565b91506020830135613b6181613a0c565b809150509250929050565b60008060408385031215613b7f57600080fd5b8235613b8a81613a0c565b946020939093013593505050565b600060e08284031215613baa57600080fd5b50919050565b600080600060608486031215613bc557600080fd5b83356001600160401b03811115613bdb57600080fd5b613be786828701613b98565b9660208601359650604090950135949350505050565b6001600160a01b03169052565b600081518084526020808501945080840160005b83811015613c3a57815187529582019590820190600101613c1e565b509495945050505050565b6080808252855190820181905260009060209060a0840190828901845b82811015613c875781516001600160a01b031684529284019290840190600101613c62565b50505083810382850152613c9b8188613c0a565b9150508281036040840152613cb08186613c0a565b91505060018060a01b038316606083015295945050505050565b60006101208284031215613baa57600080fd5b60008083601f840112613cef57600080fd5b5081356001600160401b03811115613d0657600080fd5b602083019150836020828501011115613d1e57600080fd5b9250929050565b6000806000806000806000806000806101c08b8d031215613d4557600080fd5b8a35613d5081613a0c565b995060208b0135613d6081613a0c565b985060408b0135613d7081613a0c565b975060608b0135965060808b0135955060a08b01356001600160401b0380821115613d9a57600080fd5b613da68e838f01613cdd565b909750955060c08d0135915080821115613dbf57600080fd5b50613dcc8d828e01613cdd565b9094509250613de090508c60e08d01613b98565b90509295989b9194979a5092959850565b6000806101008385031215613e0557600080fd5b82359150613e168460208501613b98565b90509250929050565b600080600060608486031215613e3457600080fd5b8335613e3f81613a0c565b92506020840135613e4f81613a0c565b91506040840135613a7581613a0c565b600060c08284031215613baa57600080fd5b6001600160a01b0391909116815260200190565b600060208284031215613e9757600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610c0957610c09613e9e565b634e487b7160e01b600052603260045260246000fd5b600060208284031215613eef57600080fd5b8135611bff81613a0c565b600060208284031215613f0c57600080fd5b8151611bff81613a0c565b600060208284031215613f2957600080fd5b815160ff81168114611bff57600080fd5b805180151581146135cb57600080fd5b600060208284031215613f5c57600080fd5b611bff82613f3a565b600181815b80851115613fa0578160001904821115613f8657613f86613e9e565b80851615613f9357918102915b93841c9390800290613f6a565b509250929050565b600082613fb757506001610c09565b81613fc457506000610c09565b8160018114613fda5760028114613fe457614000565b6001915050610c09565b60ff841115613ff557613ff5613e9e565b50506001821b610c09565b5060208310610133831016604e8410600b8410161715614023575081810a610c09565b61402d8383613f65565b806000190482111561404157614041613e9e565b029392505050565b6000611bff8383613fa8565b8082028115828204841417610c0957610c09613e9e565b634e487b7160e01b600052601260045260246000fd5b6000826140915761409161406c565b500490565b81810381811115610c0957610c09613e9e565b634e487b7160e01b600052604160045260246000fd5b60005b838110156140da5781810151838201526020016140c2565b50506000910152565b600081518084526140fb8160208601602086016140bf565b601f01601f19169290920160200192915050565b60006020808301818452808551808352604092508286019150828160051b8701018488016000805b848110156141ed57603f198a850301865282516101008151600b811061416b57634e487b7160e01b85526021600452602485fd5b8652818a015161417d8b880182613bfd565b508882015161418e8a880182613bfd565b506060808301516141a182890182613bfd565b50506080828101519087015260a0808301519087015260c0808301519087015260e0918201519186018190526141d9818701836140e3565b978a01979550505091870191600101614137565b50919998505050505050505050565b6001600160a01b03929092168252602082015260400190565b60405160c081016001600160401b0381118282101715614237576142376140a9565b60405290565b6040516101c081016001600160401b0381118282101715614237576142376140a9565b604051601f8201601f191681016001600160401b0381118282101715614288576142886140a9565b604052919050565b60006001600160401b038211156142a9576142a96140a9565b5060051b60200190565b600082601f8301126142c457600080fd5b815160206142d96142d483614290565b614260565b82815260059290921b840181019181810190868411156142f857600080fd5b8286015b8481101561431c57805161430f81613a0c565b83529183019183016142fc565b509695505050505050565b600082601f83011261433857600080fd5b815160206143486142d483614290565b82815260059290921b8401810191818101908684111561436757600080fd5b8286015b8481101561431c578051835291830191830161436b565b600060c0828403121561439457600080fd5b61439c614215565b82519091506001600160401b03808211156143b657600080fd5b6143c2858386016142b3565b835260208401519150808211156143d857600080fd5b6143e4858386016142b3565b602084015260408401519150808211156143fd57600080fd5b614409858386016142b3565b6040840152606084015191508082111561442257600080fd5b61442e85838601614327565b6060840152608084015191508082111561444757600080fd5b61445385838601614327565b608084015260a084015191508082111561446c57600080fd5b5061447984828501614327565b60a08301525092915050565b60006020828403121561449757600080fd5b81516001600160401b038111156144ad57600080fd5b612a7d84828501614382565b602080825260089082015267139bc81cda1bdc9d60c21b604082015260600190565b80516135cb81613a0c565b6001600160601b0381168114613a2157600080fd5b80516135cb816144e6565b60006101c0828403121561451957600080fd5b61452161423d565b61452a836144db565b8152614538602084016144db565b602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101206145938185016144fb565b908201526101406145a5848201613f3a565b908201526101606145b7848201613f3a565b9082015261018083810151908201526101a0928301519281019290925250919050565b6000808335601e198436030181126145f157600080fd5b8301803591506001600160401b0382111561460b57600080fd5b6020019150600581901b3603821315613d1e57600080fd5b6000806040838503121561463657600080fd5b82516001600160401b038082111561464d57600080fd5b61465986838701614327565b9350602085015191508082111561466f57600080fd5b5061467c85828601614327565b9150509250929050565b60006001820161469857614698613e9e565b5060010190565b6000602082840312156146b157600080fd5b813566ffffffffffffff81168114611bff57600080fd5b6000602082840312156146da57600080fd5b81356001600160681b0381168114611bff57600080fd5b6001600160401b0381168114613a2157600080fd5b60006020828403121561471857600080fd5b8135611bff816146f1565b60006020828403121561473557600080fd5b8135611bff816144e6565b828152604060208201526000612a7d6040830184613c0a565b6000806040838503121561476c57600080fd5b505080516020909101519092909150565b60008060006060848603121561479257600080fd5b83516001600160401b038111156147a857600080fd5b6147b486828701614382565b93505060208401519150604084015190509250925092565b600081518084526020808501945080840160005b83811015613c3a5781516001600160a01b0316875295820195908201906001016147e0565b604081526000835160c060408401526148226101008401826147cc565b90506020850151603f198085840301606086015261484083836147cc565b9250604087015191508085840301608086015261485d83836147cc565b925060608701519150808584030160a086015261487a8383613c0a565b925060808701519150808584030160c08601526148978383613c0a565b925060a08701519150808584030160e0860152506148b58282613c0a565b925050508260208301529392505050565b600080604083850312156148d957600080fd5b82519150613e1660208401613f3a565b600060ff821660ff81036148ff576148ff613e9e565b60010192915050565b60808152600061491b60808301876140e3565b828103602084015261492d81876140e3565b6001600160a01b03958616604085015293909416606090920191909152509392505050565b600081518084526020808501945080840160005b83811015613c3a5781516001600160601b031687529582019590820190600101614966565b84815260a0602082015260006149a460a0830186614952565b82810360408401526149b68186614952565b905082810360608401526149ca8185613c0a565b83810360809094019390935250506002815261060f60f31b6020820152604001949350505050565b600060208284031215614a0457600080fd5b8151611bff816146f1565b602080825260159082015274496e76616c6964206173736574506572536861726560581b604082015260600190565b6001600160a01b038c811682528b81166020830152604082018b9052606082018a90526001600160601b038981166080840152881660a083015260c0820187905260e0820186905284151561010083015283166101208201526101606101408201819052600090614ab1838201856140e3565b9e9d5050505050505050505050505050565b600082614ad257614ad261406c565b500690565b6001600160a01b03968716815294861660208601529290941660408401526060830152608082019290925290151560a082015260c00190565b60008251614b228184602087016140bf565b9190910192915050565b602081526000611bff60208301846140e356fea26469706673582212201b147860b58cb659ce03cd98dc104321b4dfe898f296bb6e4371f1da83b573bc64736f6c63430008110033",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100a35760003560e01c806307cc4239146100a8578063087aebc4146100ca57806324cb92d8146101045780632e5fdf281461013257806358ffbb3d1461014557806368bb40301461016557806395a170d714610195578063c72733f7146101d9578063c8128b65146101ec578063de8e34181461022c578063eebc5ff41461024c575b600080fd5b8180156100b457600080fd5b506100c86100c3366004613a2f565b61026c565b005b8180156100d657600080fd5b506100ea6100e5366004613a80565b61027c565b604080519283526020830191909152015b60405180910390f35b81801561011057600080fd5b5061012461011f366004613b33565b610840565b6040519081526020016100fb565b610124610140366004613b6c565b610c0f565b81801561015157600080fd5b50610124610160366004613b33565b610cce565b81801561017157600080fd5b50610185610180366004613bb0565b6111ad565b6040516100fb9493929190613c45565b8180156101a157600080fd5b506101b56101b0366004613cca565b6113ee565b6040805193845260208401929092526001600160401b0316908201526060016100fb565b6100c86101e7366004613d25565b611409565b6101ff6101fa366004613df1565b6117d9565b604080519687526020870195909552938501929092526060840152608083015260a082015260c0016100fb565b81801561023857600080fd5b50610124610247366004613e1f565b6118f5565b81801561025857600080fd5b50610124610267366004613e5f565b611c06565b610277838383611c11565b505050565b604051636553690d60e11b81526000908190889082906001600160a01b0383169063caa6d21a906102b1903090600401613e71565b602060405180830381865afa1580156102ce573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102f29190613e85565b6102fd906001613eb4565b905060008888600081811061031457610314613ec7565b90506020020160208101906103299190613edd565b90506000816001600160a01b031663aabaecd66040518163ffffffff1660e01b8152600401602060405180830381865afa15801561036b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061038f9190613efa565b90506000816001600160a01b031663313ce5676040518163ffffffff1660e01b8152600401602060405180830381865afa1580156103d1573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103f59190613f17565b60ff169050826001600160a01b031663f3c274a66040518163ffffffff1660e01b8152600401602060405180830381865afa158015610438573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061045c9190613f4a565b1561051c5761046c81600a613eb4565b61047790600a614049565b836001600160a01b031663c52987cf6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104b5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104d99190613e85565b6104e39190614055565b6104ef6008600a614049565b6104f9908b614055565b61050b90670de0b6b3a7640000614055565b6105159190614082565b9650610559565b8896506008811115610559576000610535600883614096565b61054090600a614049565b90508088111561055757610554818b614082565b97505b505b508061056f6001600160a01b0382168d8b611d68565b60408051600380825260808201909252600091816020015b61058f6139ab565b815260200190600190039081610587579050506040805161010081019091529091508060008152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b031681526020018681526020016000815260200160008152602001604051806020016040528060008152508152508160008151811061062157610621613ec7565b60209081029190910101526040805161010081019091528060058152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b031681526020018681526020018b81526020016000815260200160405180602001604052806000815250815250816001815181106106a6576106a6613ec7565b60209081029190910101526040805161010081019091528060018152306020820181905260408201526060018d8d6000816106e3576106e3613ec7565b90506020020160208101906106f89190613edd565b6001600160a01b0316815260200186815260200189815260200160008152602001604051806020016040528060008152508152508160028151811061073f5761073f613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c69061077690849060040161410f565b600060405180830381600087803b15801561079057600080fd5b505af11580156107a4573d6000803e3d6000fd5b5050505050506107ec8c8c8c8c808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152508c92508d9150611da49050565b61082f8c8c838b878f8f808060200260200160405190810160405280939291908181526020018383602002808284376000920191909152508f9250611fc4915050565b945050505050965096945050505050565b604051636553690d60e11b8152600090839082906001600160a01b0383169063caa6d21a90610873903090600401613e71565b602060405180830381865afa158015610890573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108b49190613e85565b90506000826001600160a01b031663d99d13f530846040518363ffffffff1660e01b81526004016108e69291906141fc565b600060405180830381865afa158015610903573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261092b9190810190614485565b8051519091506109565760405162461bcd60e51b815260040161094d906144b9565b60405180910390fd5b6000816040015160008151811061096f5761096f613ec7565b6020026020010151905060006001600160a01b0316816001600160a01b0316036109a0576000945050505050610c09565b6040516370a0823160e01b81526000906001600160a01b038316906370a08231906109cf903090600401613e71565b602060405180830381865afa1580156109ec573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a109190613e85565b60408051600180825281830190925291925060009190816020015b610a336139ab565b815260200190600190039081610a2b579050506040805161010081019091529091508060078152602001306001600160a01b03168152602001306001600160a01b0316815260200160006001600160a01b0316815260200186815260200160008152602001600081526020016040518060200160405280600081525081525081600081518110610ac557610ac5613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c690610afc90849060040161410f565b600060405180830381600087803b158015610b1657600080fd5b505af1158015610b2a573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03861691506370a0823190610b5d903090600401613e71565b602060405180830381865afa158015610b7a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b9e9190613e85565b9050886001600160a01b0316631513e9b96040518163ffffffff1660e01b8152600401600060405180830381600087803b158015610bdb57600080fd5b505af1158015610bef573d6000803e3d6000fd5b505050508281610bff9190614096565b9750505050505050505b92915050565b604051632afe316960e11b81526004810182905260009081906001600160a01b038516906355fc62d2906024016101c060405180830381865afa158015610c5a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c7e9190614506565b6101000151905080610c94576000915050610c09565b6001600160601b03606082901c8116908216610cb26008600a614049565b610cbc9190614055565b610cc69190614082565b915050610c09565b600080826001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610cfd9190613e71565b602060405180830381865afa158015610d1a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d3e9190613e85565b905060008111610d855760405162461bcd60e51b815260206004820152601260248201527127379037aa37b5b2b739903a3790313ab93760711b604482015260640161094d565b604051636553690d60e11b815284906000906001600160a01b0383169063caa6d21a90610db6903090600401613e71565b602060405180830381865afa158015610dd3573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610df79190613e85565b90506000826001600160a01b031663d99d13f530846040518363ffffffff1660e01b8152600401610e299291906141fc565b600060405180830381865afa158015610e46573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610e6e9190810190614485565b805151909150610e905760405162461bcd60e51b815260040161094d906144b9565b60008160400151600081518110610ea957610ea9613ec7565b602002602001015190506000816001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401610ee19190613e71565b602060405180830381865afa158015610efe573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f229190613e85565b6040805160028082526060820190925291925060009190816020015b610f466139ab565b815260200190600190039081610f3e5790505060408051610100810190915290915080600281523060208201819052604082015285518051606090920191600090610f9357610f93613ec7565b60200260200101516001600160a01b03168152602001868152602001888152602001600081526020016040518060200160405280600081525081525081600081518110610fe257610fe2613ec7565b60209081029190910101526040805161010081019091528060068152602001306001600160a01b03168152602001306001600160a01b03168152602001846001600160a01b03168152602001868152602001856060015160008151811061104b5761104b613ec7565b6020026020010151898760a0015160008151811061106b5761106b613ec7565b602002602001015161107d9190614055565b6110879190614082565b81526020016000815260200160405180602001604052806000815250815250816001815181106110b9576110b9613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0387169063b617f0c6906110f090849060040161410f565b600060405180830381600087803b15801561110a57600080fd5b505af115801561111e573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03861691506370a0823190611151903090600401613e71565b602060405180830381865afa15801561116e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906111929190613e85565b905061119e8382614096565b9b9a5050505050505050505050565b6060808060008061120b816111c560408b018b6145da565b9050116111d3576000612395565b6111e060408a018a6145da565b60008181106111f1576111f1613ec7565b90506020020160208101906112069190613edd565b612395565b9050600061121f60a08a0160808b01613edd565b885460018a01546040516301893c2160e51b81526004810186905260ff831680151560248301529394506001600160a01b039182169263010000009004821691851690633127842090604401600060405180830381865afa158015611288573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526112b09190810190614623565b80518251929a50909850146112f65760405162461bcd60e51b815260206004820152600c60248201526b496e76616c6964204461746160a01b604482015260640161094d565b60005b885181101561136c5788818151811061131457611314613ec7565b602002602001015160000361135a5760405162461bcd60e51b815260206004820152600c60248201526b21737472696b65507269636560a01b604482015260640161094d565b8061136481614686565b9150506112f9565b5061137c8c8c84848c8a8961243a565b98506113de61139160e08e0160c08f01613edd565b6040518060400160405280601181526020017021b0b6361029b83932b0b2102a37b5b2b760791b8152506040518060400160405280600381526020016210d4d560ea1b8152508486612580565b9550505050505093509350935093565b60008060006113fc84612607565b9250925092509193909250565b6001600160a01b038a166114485760405162461bcd60e51b815260206004820152600660248201526510b7bbb732b960d11b604482015260640161094d565b6001600160a01b0389166114885760405162461bcd60e51b815260206004820152600760248201526610b5b2b2b832b960c91b604482015260640161094d565b6001600160a01b0388166114ce5760405162461bcd60e51b815260206004820152600d60248201526c08599959549958da5c1a595b9d609a1b604482015260640161094d565b6114dc620f42406064614055565b87106115235760405162461bcd60e51b8152602060048201526016602482015275706572666f726d616e6365466565203e3d203130302560501b604482015260640161094d565b611531620f42406064614055565b86106115775760405162461bcd60e51b81526020600482015260156024820152746d616e6167656d656e74466565203e3d203130302560581b604482015260640161094d565b836115b15760405162461bcd60e51b815260206004820152600a60248201526921746f6b656e4e616d6560b01b604482015260640161094d565b816115ed5760405162461bcd60e51b815260206004820152600c60248201526b085d1bdad95b94de5b589bdb60a21b604482015260640161094d565b60006115ff6080830160608401613edd565b6001600160a01b03160361163e5760405162461bcd60e51b815260206004820152600660248201526508585cdcd95d60d21b604482015260640161094d565b600061165060a0830160808401613edd565b6001600160a01b0316036116945760405162461bcd60e51b815260206004820152600b60248201526a21756e6465726c79696e6760a81b604482015260640161094d565b60006116a660c0830160a0840161469f565b66ffffffffffffff16116116ed5760405162461bcd60e51b815260206004820152600e60248201526d216d696e696d756d537570706c7960901b604482015260640161094d565b60006116ff60e0830160c084016146c8565b6001600160681b03161161173e5760405162461bcd60e51b815260040161094d906020808252600490820152630216361760e41b604082015260600190565b61174e60c0820160a0830161469f565b66ffffffffffffff1661176760e0830160c084016146c8565b6001600160681b0316116117cd5760405162461bcd60e51b815260206004820152602760248201527f6361702068617320746f20626520686967686572207468616e206d696e696d756044820152666d537570706c7960c81b606482015260840161094d565b50505050505050505050565b60018201546002830154600091829182918291829182916020890135916001600160801b03600160681b909104811691168361181960608c013585614096565b9050611870818d600001600f9054906101000a90046001600160681b03166001600160681b03168e600101600d9054906101000a90046001600160801b03166001600160801b03168e608001358f60a00135612981565b91975090955061188290508585614096565b93506118ab6118958360408e0135614096565b6118a360608e013587614096565b858e35612a3d565b97506118bd60c08c0135898d35612a85565b6118cb9060608d0135613eb4565b98506118d983898d35612abf565b96506118e58985614096565b9950505050509295509295509295565b6040516370a0823160e01b8152600090849082906001600160a01b038616906370a0823190611928903090600401613e71565b602060405180830381865afa158015611945573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119699190613e85565b60405163565eea1960e01b81529091506001600160a01b0383169063565eea199061199a90889085906004016141fc565b602060405180830381865afa1580156119b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119db9190613e85565b6000036119ed57600092505050611bff565b6040516370a0823160e01b81526000906001600160a01b038616906370a0823190611a1c903090600401613e71565b602060405180830381865afa158015611a39573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a5d9190613e85565b60408051600180825281830190925291925060009190816020015b611a806139ab565b815260200190600190039081611a7857905050604080516101008101909152909150806008815260200160006001600160a01b03168152602001306001600160a01b03168152602001886001600160a01b0316815260200160008152602001848152602001600081526020016040518060200160405280600081525081525081600081518110611b1257611b12613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c690611b4990849060040161410f565b600060405180830381600087803b158015611b6357600080fd5b505af1158015611b77573d6000803e3d6000fd5b50506040516370a0823160e01b8152600092506001600160a01b03891691506370a0823190611baa903090600401613e71565b602060405180830381865afa158015611bc7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611beb9190613e85565b9050611bf78382614096565b955050505050505b9392505050565b6000610c0982612afa565b6000611c48611c266060860160408701614706565b611c366040870160208801614723565b611c436020880188614723565b612e29565b60408051600180825281830190925291925060009190602080830190803683370190505090508181600081518110611c8257611c82613ec7565b602002602001018181525050836001600160a01b0316637882deaf846001600160a01b031663432833a66040518163ffffffff1660e01b8152600401602060405180830381865afa158015611cdb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611cff9190613e85565b836040518363ffffffff1660e01b8152600401611d1d929190614740565b60408051808303816000875af1158015611d3b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d5f9190614759565b50505050505050565b73dac17f958d2ee523a2206206994597c13d831ec6196001600160a01b03841601611d9957611d9983836000612e67565b610277838383612e67565b6000859050600084600081518110611dbe57611dbe613ec7565b60200260200101519050611de68685836001600160a01b0316611d689092919063ffffffff16565b60408051600280825260608201909252600091816020015b611e066139ab565b815260200190600190039081611dfe579050506040805161010081019091529091508060038152602001856001600160a01b03168152602001306001600160a01b0316815260200187600081518110611e6157611e61613ec7565b60200260200101516001600160a01b0316815260200160018152602001868152602001600081526020016040518060200160405280600081525081525081600081518110611eb157611eb1613ec7565b60209081029190910101526040805161010081019091528060018152602001856001600160a01b03168152602001306001600160a01b0316815260200187600181518110611f0157611f01613ec7565b60200260200101516001600160a01b0316815260200160018152602001868152602001600081526020016040518060200160405280600081525081525081600181518110611f5157611f51613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0384169063b617f0c690611f8890849060040161410f565b600060405180830381600087803b158015611fa257600080fd5b505af1158015611fb6573d6000803e3d6000fd5b505050505050505050505050565b6000808890506000816001600160a01b031663ce3e39c06040518163ffffffff1660e01b8152600401602060405180830381865afa15801561200a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061202e9190613efa565b905060008560018151811061204557612045613ec7565b6020026020010151905061206d8a86836001600160a01b0316611d689092919063ffffffff16565b604080516001808252818301909252600091816020015b61208c6139ab565b815260200190600190039081612084579050506040805161010081019091529091508060038152602001306001600160a01b03168152602001306001600160a01b03168152602001886001815181106120e7576120e7613ec7565b60200260200101516001600160a01b0316815260200189815260200187815260200160008152602001604051806020016040528060008152508152508160008151811061213657612136613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0385169063b617f0c69061216d90849060040161410f565b600060405180830381600087803b15801561218757600080fd5b505af115801561219b573d6000803e3d6000fd5b50505050600080856001600160a01b0316639daafbe8308c6040518363ffffffff1660e01b81526004016121d09291906141fc565b600060405180830381865afa1580156121ed573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052612215919081019061477d565b5091509150600080866001600160a01b031663cd43fbfb85856040518363ffffffff1660e01b815260040161224b929190614805565b6040805180830381865afa158015612267573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061228b91906148c6565b60408051610100810190915291935091508060068152602001306001600160a01b03168152602001306001600160a01b031681526020018f6001600160a01b031681526020018d815260200183815260200160008152602001604051806020016040528060008152508152508560008151811061230a5761230a613ec7565b6020908102919091010152604051635b0bf86360e11b81526001600160a01b0389169063b617f0c69061234190889060040161410f565b600060405180830381600087803b15801561235b57600080fd5b505af115801561236f573d6000803e3d6000fd5b50505050818d61237f9190614096565b985050505050505050505b979650505050505050565b60006001600160a01b0382166123ae57610c0942612fa2565b6000826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156123ee573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124129190613e85565b90506124218162093a80613eb4565b42111561243157611bff42612fa2565b611bff81612fa2565b6060600061244b60208a018a613edd565b9050600085516001600160401b03811115612468576124686140a9565b604051908082528060200260200182016040528015612491578160200160208202803683370190505b50905060005b86518160ff161015612572576124ec6124b360208d018d613edd565b8a8d60200160208101906124c79190613edd565b8b8b8660ff16815181106124dd576124dd613ec7565b60200260200101518b8b613041565b828260ff168151811061250157612501613ec7565b60200260200101906001600160a01b031690816001600160a01b031681525050612560828260ff168151811061253957612539613ec7565b60200260200101518b8a8e60200160208101906125569190613edd565b8f60600135613155565b8061256a816148e9565b915050612497565b509998505050505050505050565b600080612595876001600160a01b0316613536565b604051630381fe1560e21b81529091506001600160a01b03821690630e07f854906125ca908990899089908990600401614908565b600060405180830381600087803b1580156125e457600080fd5b505af11580156125f8573d6000803e3d6000fd5b50929998505050505050505050565b60008080612616606480614055565b61262860c086013560a0870135614055565b6126329190614082565b92506126436060850135600a614049565b60e085013561265760086060880135613eb4565b61266290600a614049565b61266c9086614055565b6126769190614082565b6126809190614082565b91506001600160601b038311156126e55760405162461bcd60e51b8152602060048201526024808201527f73656c6c416d6f756e74203e20747970652875696e74393629206d61782076616044820152636c75652160e01b606482015260840161094d565b6001600160601b038211156127485760405162461bcd60e51b815260206004820152602360248201527f627579416d6f756e74203e20747970652875696e74393629206d61782076616c60448201526275652160e81b606482015260840161094d565b61277c61275b6040860160208701613edd565b8461276c6060880160408901613edd565b6001600160a01b03169190612e67565b604080516001808252818301909252600091602080830190803683375050604080516001808252818301909252929350600092915060208083019080368337505060408051600180825281830190925292935060009291506020808301908036833701905050905084836000815181106127f8576127f8613ec7565b60200260200101906001600160601b031690816001600160601b031681525050858260008151811061282c5761282c613ec7565b60200260200101906001600160601b031690816001600160601b031681525050600160001b8160008151811061286457612864613ec7565b6020026020010181815250508660200160208101906128839190613edd565b6001600160a01b031663d225269c88608001358585856040518563ffffffff1660e01b81526004016128b8949392919061498b565b6020604051808303816000875af11580156128d7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128fb91906149f2565b935061290f61012088016101008901613edd565b6001600160a01b03166129256020890189613edd565b6040805160808b01358152602081018a90529081018890526001600160a01b0391909116907fa227b5eceb2bd983c0ed9dd34c971be74cd4f386b289d4415602a1fbcf2cb53b9060600160405180910390a35050509193909250565b60008060008086891161299557600061299f565b61299f878a614096565b905060008060008a841115612a2b57600089116129bd5760006129e9565b6129cb620f42406064614055565b6129d58a8d614055565b6129df9190614082565b6129e99085614096565b9250600088116129fa576000612a1c565b612a08620f42406064614055565b612a128986614055565b612a1c9190614082565b9150612a288284613eb4565b90505b919b909a509098509650505050505050565b600080612a4b83600a614049565b905060008611612a5b5780612a79565b612a7986612a73612a6c88886135d0565b84906135dc565b906135e8565b9150505b949350505050565b600060018311612aa75760405162461bcd60e51b815260040161094d90614a0f565b612a7d612ab583600a614049565b612a7386866135dc565b600060018311612ae15760405162461bcd60e51b815260040161094d90614a0f565b612a7d83612a73612af385600a614049565b87906135dc565b600080612b12612b0d6020850185613edd565b6135f4565b905060008111612b595760405162461bcd60e51b8152602060048201526012602482015271139bc81bdd1bdad95b9cc81d1bc81cd95b1b60721b604482015260640161094d565b612bf2612b6c6040850160208601613edd565b612b796020860186613edd565b6001600160a01b03166370a08231306040518263ffffffff1660e01b8152600401612ba49190613e71565b602060405180830381865afa158015612bc1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612be59190613e85565b61276c6020870187613edd565b6000612c10612c06836402540be400614055565b85608001356136d0565b90506012846060013511612c4757612c2d60608501356012614096565b612c3890600a614049565b612c429082614082565b612c6b565b612c5660126060860135614096565b612c6190600a614049565b612c6b9082614055565b90506001600160601b03811115612ce75760405162461bcd60e51b815260206004820152603a60248201527f6f7074696f6e5072656d69756d202a206f546f6b656e53656c6c416d6f756e74604482015279203e20747970652875696e74393629206d61782076616c75652160301b606482015260840161094d565b6000612cf760a086013542613eb4565b9050612d096040860160208701613edd565b6001600160a01b0316630a4cd6c9612d246020880188613edd565b612d346060890160408a01613edd565b60408051602081018252600080825291516001600160e01b031960e087901b168152612d73949392889283928c928c9260019282918291600401614a3e565b6020604051808303816000875af1158015612d92573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612db69190613e85565b935033612dc96060870160408801613edd565b6001600160a01b0316612ddf6020880188613edd565b6001600160a01b03167f95ad3b10488285d6307fda297f633faaf2a0d713c08ebe5f49c1b9255b01d29e87604051612e1991815260200190565b60405180910390a4505050919050565b60006001600160601b038216612e5d600160601b600160c01b03606086901b166001600160c01b031960c088901b16613eb4565b612a7d9190613eb4565b801580612ee15750604051636eb1769f60e11b81523060048201526001600160a01b03838116602483015284169063dd62ed3e90604401602060405180830381865afa158015612ebb573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612edf9190613e85565b155b612f4c5760405162461bcd60e51b815260206004820152603660248201527f5361666545524332303a20617070726f76652066726f6d206e6f6e2d7a65726f60448201527520746f206e6f6e2d7a65726f20616c6c6f77616e636560501b606482015260840161094d565b6102778363095ea7b360e01b8484604051602401612f6b9291906141fc565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b03199093169290921790915261370a565b6000806007612fb46201518085614082565b612fbf906004613eb4565b612fc99190614ac3565b905060006007612fda83600c614096565b612fe49190614ac3565b612ff19062015180614055565b612ffb9085613eb4565b9050600061300c6201518083614ac3565b6130169083614096565b61302290617080613eb4565b9050808510612a7d5761303862093a8082613eb4565b95945050505050565b6040516304551c1560e21b8152600090889082906001600160a01b0383169063115470549061307e908c908c908c908c908c908c90600401614ad7565b602060405180830381865afa15801561309b573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906130bf9190613efa565b90506001600160a01b038116156130d957915061238a9050565b604051630c09746360e41b81526000906001600160a01b0384169063c097463090613112908d908d908d908d908d908d90600401614ad7565b6020604051808303816000875af1158015613131573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061119e9190613efa565b6001600160a01b03851661319c5760405162461bcd60e51b815260206004820152600e60248201526d216f746f6b656e4164647265737360901b604482015260640161094d565b8354604080516379e13a5360e11b81529051879260ff161515916001600160a01b0384169163f3c274a6916004808201926020929091908290030181865afa1580156131ec573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132109190613f4a565b15151461324f5760405162461bcd60e51b815260206004820152600d60248201526c0a8f2e0ca40dad2e6dac2e8c6d609b1b604482015260640161094d565b600185015460408051631c56369f60e21b815290516001600160a01b0392831692841691637158da7c9160048083019260209291908290030181865afa15801561329d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132c19190613efa565b6001600160a01b03161461330f5760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c81d5b99195c9b1e5a5b99d05cdcd95d605a1b604482015260640161094d565b836001600160a01b0316816001600160a01b031663aabaecd66040518163ffffffff1660e01b8152600401602060405180830381865afa158015613357573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061337b9190613efa565b6001600160a01b0316146133c95760405162461bcd60e51b815260206004820152601560248201527415dc9bdb99c818dbdb1b185d195c985b105cdcd95d605a1b604482015260640161094d565b826001600160a01b0316816001600160a01b03166317d69bc86040518163ffffffff1660e01b8152600401602060405180830381865afa158015613411573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134359190613efa565b6001600160a01b0316146134815760405162461bcd60e51b8152602060048201526013602482015272737472696b65417373657420213d205553444360681b604482015260640161094d565b600061348d8342613eb4565b905080826001600160a01b031663ade6e2aa6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156134ce573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134f29190613e85565b1015611d5f5760405162461bcd60e51b8152602060048201526013602482015272457870697279206265666f72652064656c617960681b604482015260640161094d565b6000763d602d80600a3d3981f3363d3d373d3d3d363d730000008260601b60e81c176000526e5af43d82803e903d91602b57fd5bf38260781b17602052603760096000f090506001600160a01b0381166135cb5760405162461bcd60e51b8152602060048201526016602482015275115490cc4c4d8dce8818dc99585d194819985a5b195960521b604482015260640161094d565b919050565b6000611bff8284614096565b6000611bff8284614055565b6000611bff8284614082565b600080826001600160a01b03166370a08231306040518263ffffffff1660e01b81526004016136239190613e71565b602060405180830381865afa158015613640573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906136649190613e85565b90506001600160601b03811115610c095760405162461bcd60e51b815260206004820152602a60248201527f6f546f6b656e53656c6c416d6f756e74203e20747970652875696e74393629206044820152696d61782076616c75652160b01b606482015260840161094d565b6000670de0b6b3a76400006137006136e885856137dc565b6136fb6002670de0b6b3a7640000614082565b613843565b611bff9190614082565b600061375f826040518060400160405280602081526020017f5361666545524332303a206c6f772d6c6576656c2063616c6c206661696c6564815250856001600160a01b03166138989092919063ffffffff16565b805190915015610277578080602001905181019061377d9190613f4a565b6102775760405162461bcd60e51b815260206004820152602a60248201527f5361666545524332303a204552433230206f7065726174696f6e20646964206e6044820152691bdd081cdd58d8d9595960b21b606482015260840161094d565b6000811580613800575082826137f28183614055565b92506137fe9083614082565b145b610c095760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6d756c2d6f766572666c6f7760601b604482015260640161094d565b6000826138508382613eb4565b9150811015610c095760405162461bcd60e51b815260206004820152601460248201527364732d6d6174682d6164642d6f766572666c6f7760601b604482015260640161094d565b6060612a7d848460008585600080866001600160a01b031685876040516138bf9190614b10565b60006040518083038185875af1925050503d80600081146138fc576040519150601f19603f3d011682016040523d82523d6000602084013e613901565b606091505b509150915061238a878383876060831561397c578251600003613975576001600160a01b0385163b6139755760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e7472616374000000604482015260640161094d565b5081612a7d565b612a7d83838151156139915781518083602001fd5b8060405162461bcd60e51b815260040161094d9190614b2c565b604080516101008101909152806000815260200160006001600160a01b0316815260200160006001600160a01b0316815260200160006001600160a01b03168152602001600081526020016000815260200160008152602001606081525090565b6001600160a01b0381168114613a2157600080fd5b50565b80356135cb81613a0c565b600080600083850360a0811215613a4557600080fd5b6060811215613a5357600080fd5b508392506060840135613a6581613a0c565b91506080840135613a7581613a0c565b809150509250925092565b60008060008060008060a08789031215613a9957600080fd5b8635613aa481613a0c565b95506020870135613ab481613a0c565b945060408701356001600160401b0380821115613ad057600080fd5b818901915089601f830112613ae457600080fd5b813581811115613af357600080fd5b8a60208260051b8501011115613b0857600080fd5b60208301965080955050505060608701359150613b2760808801613a24565b90509295509295509295565b60008060408385031215613b4657600080fd5b8235613b5181613a0c565b91506020830135613b6181613a0c565b809150509250929050565b60008060408385031215613b7f57600080fd5b8235613b8a81613a0c565b946020939093013593505050565b600060e08284031215613baa57600080fd5b50919050565b600080600060608486031215613bc557600080fd5b83356001600160401b03811115613bdb57600080fd5b613be786828701613b98565b9660208601359650604090950135949350505050565b6001600160a01b03169052565b600081518084526020808501945080840160005b83811015613c3a57815187529582019590820190600101613c1e565b509495945050505050565b6080808252855190820181905260009060209060a0840190828901845b82811015613c875781516001600160a01b031684529284019290840190600101613c62565b50505083810382850152613c9b8188613c0a565b9150508281036040840152613cb08186613c0a565b91505060018060a01b038316606083015295945050505050565b60006101208284031215613baa57600080fd5b60008083601f840112613cef57600080fd5b5081356001600160401b03811115613d0657600080fd5b602083019150836020828501011115613d1e57600080fd5b9250929050565b6000806000806000806000806000806101c08b8d031215613d4557600080fd5b8a35613d5081613a0c565b995060208b0135613d6081613a0c565b985060408b0135613d7081613a0c565b975060608b0135965060808b0135955060a08b01356001600160401b0380821115613d9a57600080fd5b613da68e838f01613cdd565b909750955060c08d0135915080821115613dbf57600080fd5b50613dcc8d828e01613cdd565b9094509250613de090508c60e08d01613b98565b90509295989b9194979a5092959850565b6000806101008385031215613e0557600080fd5b82359150613e168460208501613b98565b90509250929050565b600080600060608486031215613e3457600080fd5b8335613e3f81613a0c565b92506020840135613e4f81613a0c565b91506040840135613a7581613a0c565b600060c08284031215613baa57600080fd5b6001600160a01b0391909116815260200190565b600060208284031215613e9757600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610c0957610c09613e9e565b634e487b7160e01b600052603260045260246000fd5b600060208284031215613eef57600080fd5b8135611bff81613a0c565b600060208284031215613f0c57600080fd5b8151611bff81613a0c565b600060208284031215613f2957600080fd5b815160ff81168114611bff57600080fd5b805180151581146135cb57600080fd5b600060208284031215613f5c57600080fd5b611bff82613f3a565b600181815b80851115613fa0578160001904821115613f8657613f86613e9e565b80851615613f9357918102915b93841c9390800290613f6a565b509250929050565b600082613fb757506001610c09565b81613fc457506000610c09565b8160018114613fda5760028114613fe457614000565b6001915050610c09565b60ff841115613ff557613ff5613e9e565b50506001821b610c09565b5060208310610133831016604e8410600b8410161715614023575081810a610c09565b61402d8383613f65565b806000190482111561404157614041613e9e565b029392505050565b6000611bff8383613fa8565b8082028115828204841417610c0957610c09613e9e565b634e487b7160e01b600052601260045260246000fd5b6000826140915761409161406c565b500490565b81810381811115610c0957610c09613e9e565b634e487b7160e01b600052604160045260246000fd5b60005b838110156140da5781810151838201526020016140c2565b50506000910152565b600081518084526140fb8160208601602086016140bf565b601f01601f19169290920160200192915050565b60006020808301818452808551808352604092508286019150828160051b8701018488016000805b848110156141ed57603f198a850301865282516101008151600b811061416b57634e487b7160e01b85526021600452602485fd5b8652818a015161417d8b880182613bfd565b508882015161418e8a880182613bfd565b506060808301516141a182890182613bfd565b50506080828101519087015260a0808301519087015260c0808301519087015260e0918201519186018190526141d9818701836140e3565b978a01979550505091870191600101614137565b50919998505050505050505050565b6001600160a01b03929092168252602082015260400190565b60405160c081016001600160401b0381118282101715614237576142376140a9565b60405290565b6040516101c081016001600160401b0381118282101715614237576142376140a9565b604051601f8201601f191681016001600160401b0381118282101715614288576142886140a9565b604052919050565b60006001600160401b038211156142a9576142a96140a9565b5060051b60200190565b600082601f8301126142c457600080fd5b815160206142d96142d483614290565b614260565b82815260059290921b840181019181810190868411156142f857600080fd5b8286015b8481101561431c57805161430f81613a0c565b83529183019183016142fc565b509695505050505050565b600082601f83011261433857600080fd5b815160206143486142d483614290565b82815260059290921b8401810191818101908684111561436757600080fd5b8286015b8481101561431c578051835291830191830161436b565b600060c0828403121561439457600080fd5b61439c614215565b82519091506001600160401b03808211156143b657600080fd5b6143c2858386016142b3565b835260208401519150808211156143d857600080fd5b6143e4858386016142b3565b602084015260408401519150808211156143fd57600080fd5b614409858386016142b3565b6040840152606084015191508082111561442257600080fd5b61442e85838601614327565b6060840152608084015191508082111561444757600080fd5b61445385838601614327565b608084015260a084015191508082111561446c57600080fd5b5061447984828501614327565b60a08301525092915050565b60006020828403121561449757600080fd5b81516001600160401b038111156144ad57600080fd5b612a7d84828501614382565b602080825260089082015267139bc81cda1bdc9d60c21b604082015260600190565b80516135cb81613a0c565b6001600160601b0381168114613a2157600080fd5b80516135cb816144e6565b60006101c0828403121561451957600080fd5b61452161423d565b61452a836144db565b8152614538602084016144db565b602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101206145938185016144fb565b908201526101406145a5848201613f3a565b908201526101606145b7848201613f3a565b9082015261018083810151908201526101a0928301519281019290925250919050565b6000808335601e198436030181126145f157600080fd5b8301803591506001600160401b0382111561460b57600080fd5b6020019150600581901b3603821315613d1e57600080fd5b6000806040838503121561463657600080fd5b82516001600160401b038082111561464d57600080fd5b61465986838701614327565b9350602085015191508082111561466f57600080fd5b5061467c85828601614327565b9150509250929050565b60006001820161469857614698613e9e565b5060010190565b6000602082840312156146b157600080fd5b813566ffffffffffffff81168114611bff57600080fd5b6000602082840312156146da57600080fd5b81356001600160681b0381168114611bff57600080fd5b6001600160401b0381168114613a2157600080fd5b60006020828403121561471857600080fd5b8135611bff816146f1565b60006020828403121561473557600080fd5b8135611bff816144e6565b828152604060208201526000612a7d6040830184613c0a565b6000806040838503121561476c57600080fd5b505080516020909101519092909150565b60008060006060848603121561479257600080fd5b83516001600160401b038111156147a857600080fd5b6147b486828701614382565b93505060208401519150604084015190509250925092565b600081518084526020808501945080840160005b83811015613c3a5781516001600160a01b0316875295820195908201906001016147e0565b604081526000835160c060408401526148226101008401826147cc565b90506020850151603f198085840301606086015261484083836147cc565b9250604087015191508085840301608086015261485d83836147cc565b925060608701519150808584030160a086015261487a8383613c0a565b925060808701519150808584030160c08601526148978383613c0a565b925060a08701519150808584030160e0860152506148b58282613c0a565b925050508260208301529392505050565b600080604083850312156148d957600080fd5b82519150613e1660208401613f3a565b600060ff821660ff81036148ff576148ff613e9e565b60010192915050565b60808152600061491b60808301876140e3565b828103602084015261492d81876140e3565b6001600160a01b03958616604085015293909416606090920191909152509392505050565b600081518084526020808501945080840160005b83811015613c3a5781516001600160601b031687529582019590820190600101614966565b84815260a0602082015260006149a460a0830186614952565b82810360408401526149b68186614952565b905082810360608401526149ca8185613c0a565b83810360809094019390935250506002815261060f60f31b6020820152604001949350505050565b600060208284031215614a0457600080fd5b8151611bff816146f1565b602080825260159082015274496e76616c6964206173736574506572536861726560581b604082015260600190565b6001600160a01b038c811682528b81166020830152604082018b9052606082018a90526001600160601b038981166080840152881660a083015260c0820187905260e0820186905284151561010083015283166101208201526101606101408201819052600090614ab1838201856140e3565b9e9d5050505050505050505050505050565b600082614ad257614ad261406c565b500690565b6001600160a01b03968716815294861660208601529290941660408401526060830152608082019290925290151560a082015260c00190565b60008251614b228184602087016140bf565b9190910192915050565b602081526000611bff60208301846140e356fea26469706673582212201b147860b58cb659ce03cd98dc104321b4dfe898f296bb6e4371f1da83b573bc64736f6c63430008110033",
  "devdoc": {
    "kind": "dev",
    "methods": {
      "burnOtokens(address,address)": {
        "params": {
          "currentSpread": "is the address of the current option",
          "gammaController": "is the address of the opyn controller contract"
        },
        "returns": {
          "_0": "amount of collateral redeemed by burning otokens"
        }
      },
      "claimAuctionOtokens(Vault.AuctionSellOrder,address,address)": {
        "params": {
          "auctionSellOrder": "is the sell order of the bid",
          "counterpartyThetaVault": "is the address of the counterparty theta vault of this delta vault",
          "gnosisEasyAuction": "is the address of the gnosis auction contract holding custody to the funds"
        }
      },
      "commitAndClose(VaultLifecycleSpread.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)": {
        "params": {
          "closeParams": "is the struct with details on previous spread and strike selection details",
          "vaultParams": "is the struct with vault general data",
          "vaultState": "is the struct with vault accounting state"
        },
        "returns": {
          "deltas": "is the deltas of the new options in the spread",
          "spread": "addresses of the new short and long options",
          "strikePrices": "is the strike prices of the options in spread"
        }
      },
      "createSpread(address,address,address[],uint256,address)": {
        "params": {
          "depositAmount": "is the amount of collateral to deposit",
          "gammaController": "is the address of the opyn controller contract",
          "marginPool": "is the address of the opyn margin contract which holds the collateral",
          "spread": "Spread oTokens",
          "spreadToken": "Spread Token"
        },
        "returns": {
          "collateralUsed": "collateral amount used to create spread",
          "mintAmount": "spreadToken mint amount"
        }
      },
      "getAuctionSettlementPrice(address,uint256)": {
        "params": {
          "gnosisEasyAuction": "The address of the Gnosis Easy Auction contract"
        },
        "returns": {
          "_0": "settlementPrice Auction settlement price"
        }
      },
      "placeBid(GnosisAuction.BidDetails)": {
        "params": {
          "bidDetails": "is the struct with all the details of the bid including the auction's id and how much to bid"
        }
      },
      "rollover(Vault.VaultState storage,VaultLifecycleSpread.RolloverParams)": {
        "params": {
          "params": "is the rollover parameters passed to compute the next state",
          "vaultState": "is the storage variable vaultState passed from RibbonVault"
        },
        "returns": {
          "mintShares": "is the amount of shares to mint from deposits",
          "newLockedAmount": "is the amount of funds to allocate for the new round",
          "newPricePerShare": "is the price per share of the new round",
          "performanceFeeInAsset": "is the performance fee charged by vault",
          "queuedWithdrawAmount": "is the amount of funds set aside for withdrawal",
          "totalVaultFee": "is the total amount of fee charged by vault"
        }
      },
      "settleLong(address,address,address)": {
        "params": {
          "asset": "is the address of the vault's asset",
          "gammaController": "is the address of the opyn controller contract",
          "oldOption": "is the address of the old option"
        },
        "returns": {
          "_0": "amount of asset received by exercising the option"
        }
      },
      "settleShort(address,address)": {
        "params": {
          "gammaController": "is the address of the opyn controller contract",
          "spreadToken": "Token which holds other vault of the strategy"
        },
        "returns": {
          "_0": "amount of collateral redeemed from the vault"
        }
      },
      "startAuction(GnosisAuction.AuctionDetails)": {
        "params": {
          "auctionDetails": "is the struct with all the custom parameters of the auction"
        },
        "returns": {
          "_0": "the auction id of the newly created auction"
        }
      },
      "verifyInitializerParams(address,address,address,uint256,uint256,string,string,Vault.VaultParams)": {
        "params": {
          "_vaultParams": "is the struct with vault general data",
          "feeRecipient": "is the address to recieve vault performance and management fees",
          "owner": "is the owner of the vault with critical permissions",
          "performanceFee": "is the perfomance fee pct.",
          "tokenName": "is the name of the token",
          "tokenSymbol": "is the symbol of the token"
        }
      }
    },
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "burnOtokens(address,address)": {
        "notice": "Burn the remaining oTokens left over from auction. Currently this implementation is simple. It burns oTokens from the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time."
      },
      "claimAuctionOtokens(Vault.AuctionSellOrder,address,address)": {
        "notice": "Claims the oTokens belonging to the vault"
      },
      "commitAndClose(VaultLifecycleSpread.CloseParams,Vault.VaultParams storage,Vault.VaultState storage)": {
        "notice": "Sets the next spread for the vault, and calculates its premium for the auction"
      },
      "createSpread(address,address,address[],uint256,address)": {
        "notice": "Creates the actual Opyn short position by depositing collateral and minting otokens"
      },
      "getAuctionSettlementPrice(address,uint256)": {
        "notice": "Gets the settlement price of a settled auction"
      },
      "placeBid(GnosisAuction.BidDetails)": {
        "notice": "Places a bid in an auction"
      },
      "rollover(Vault.VaultState storage,VaultLifecycleSpread.RolloverParams)": {
        "notice": "Calculate the shares to mint, new price per share, and amount of funds to re-allocate as collateral for the new round"
      },
      "settleLong(address,address,address)": {
        "notice": "Exercises the ITM option using existing long otoken position. Currently this implementation is simple. It calls the `Redeem` action to claim the payout."
      },
      "settleShort(address,address)": {
        "notice": "Close the existing short otoken position. Currently this implementation is simple. It closes the most recent vault opened by the contract. This assumes that the contract will only have a single vault open at any given time. Since calling `_closeShort` deletes vaults by calling SettleVault action, this assumption should hold."
      },
      "startAuction(GnosisAuction.AuctionDetails)": {
        "notice": "Starts the gnosis auction"
      },
      "verifyInitializerParams(address,address,address,uint256,uint256,string,string,Vault.VaultParams)": {
        "notice": "Verify the constructor params satisfy requirements"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}